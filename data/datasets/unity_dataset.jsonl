{"file": "Quests/StepController.cs", "language": "unity", "function_name": "InteractWithCharacter", "start_line": 56, "end_line": 73, "comment": "start a dialogue when interaction\n\nsome Steps need to be instantanious. And do not need the interact button.\n\nwhen interaction again, restart same dialogue.\n", "code": "\tpublic void InteractWithCharacter()\n\t{\n\t\tif (_gameStateManager.CurrentGameState == GameState.Gameplay)\n\t\t{\n\t\t\tDialogueDataSO displayDialogue = _questData.InteractWithCharacter(_actor, false, false);\n\t\t\t//Debug.Log(\"dialogue \" + displayDialogue + \"actor\" + _actor);\n\t\t\tif (displayDialogue != null)\n\t\t\t{\n\t\t\t\t_currentDialogue = displayDialogue;\n\t\t\t\tStartDialogue();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tPlayDefaultDialogue();\n\t\t\t}\n\t\t}\n\n\t}\n"}
{"file": "Quests/Editor/QuestEditorWindow.cs", "language": "unity", "function_name": "MenuItem", "start_line": 26, "end_line": 34, "comment": "Note: Hidden from the tools because it's not fully functional at the moment\n", "code": "\t//[MenuItem(\"ChopChop/Quest Editor\")]\n\tpublic static void ShowWindow()\n\t{\n\t\tQuestEditorWindow wnd = GetWindow<QuestEditorWindow>();\n\t\twnd.titleContent = new GUIContent(\"Quest Editor\");\n\n\t\t// Sets a minimum size to the window.\n\t\twnd.minSize = new Vector2(250, 250);\n\t}\n"}
{"file": "Quests/Editor/LocalizationUtils.cs", "language": "unity", "function_name": "func_at_line_15", "start_line": 15, "end_line": 30, "comment": "<summary>\n", "code": "\t/// (Editor only)\n\t/// Gets a locale to use in edit mode in the editor.\n\t/// </summary>\n\t/// <param name=\"tableCollection\">Optional table collection with which to filter the available locales.</param>\n\t/// <returns>The locale, null if none usable found.</returns>\n\n\tstatic Locale Editor_GetValidLocaleInEditMode(LocalizationTableCollection tableCollection)\n\t{\n\t\tforeach (var locale in LocalizationEditorSettings.GetLocales())\n\t\t{\n\t\t\tif (locale != null && (tableCollection == null || tableCollection.GetTable(locale.Identifier) != null))\n\t\t\t\treturn locale;\n\t\t}\n\n\t\treturn null;\n\t}\n"}
{"file": "Quests/Editor/LocalizationUtils.cs", "language": "unity", "function_name": "GetLocalizedStringImmediateSafe", "start_line": 40, "end_line": 65, "comment": "<summary>\n\nGets the localized string from an already loaded table, taking into account whether we are in edit mode, play mode, or a build.\n\n</summary>\n\n<param name=\"localizedStringReference\">The <see cref=\"LocalizedString\"/>.</param>\n\n<returns>The localized string.</returns>\n", "code": "\tpublic static string GetLocalizedStringImmediateSafe(this LocalizedString localizedStringReference)\n\t{\n\t\t// If we are in the editor in edit mode, we need to find a valid locale and get the localized string from it:\n#if UNITY_EDITOR\n\t\tif (EditorApplication.isPlaying)\n\t\t\treturn string.Empty;\n\n\t\tstring text = null;\n\t\tif (!localizedStringReference.IsEmpty)\n\t\t{\n\t\t\tvar tableCollection = LocalizationEditorSettings.GetStringTableCollection(localizedStringReference.TableReference);\n\t\t\tLocale locale = Editor_GetValidLocaleInEditMode(tableCollection);\n\t\t\tif (locale != null)\n\t\t\t{\n\t\t\t\tStringTable table = (StringTable)tableCollection.GetTable(locale.Identifier);\n\t\t\t\tif (table != null)\n\t\t\t\t\tif (table.GetEntryFromReference(localizedStringReference.TableEntryReference)!=null)\n\t\t\t\t\ttext = table.GetEntryFromReference(localizedStringReference.TableEntryReference).LocalizedValue;\n\t\t\t}\n\t\t}\n\t\treturn text;\n#else\n\t\t// At runtime (build or editor in play mode), we just get the localized string normally:\n\t\treturn localizedStringReference.GetLocalizedString();\n#endif\n\t}\n"}
{"file": "Cutscenes/CutsceneManager.cs", "language": "unity", "function_name": "OnAdvance", "start_line": 77, "end_line": 84, "comment": "<summary>\n\nThis callback is executed when the player presses the button to advance dialogues. If the Timeline is currently paused due to a <c>DialogueControlClip</c>, it will resume its playback.\n\n</summary>\n", "code": "\tprivate void OnAdvance()\n\t{\n\t\tif (_isPaused)\n\t\t{\n\t\t\tResumeTimeline();\n\t\t\tLineEnded();\n\t\t}\n\t}\n"}
{"file": "Cutscenes/CutsceneManager.cs", "language": "unity", "function_name": "PauseTimeline", "start_line": 89, "end_line": 93, "comment": "<summary>\n\nCalled by <c>DialogueControlClip</c> on the Timeline.\n\n</summary>\n", "code": "\tvoid PauseTimeline()\n\t{\n\t\t_isPaused = true;\n\t\t_activePlayableDirector.playableGraph.GetRootPlayable(0).SetSpeed(0);\n\t}\n"}
{"file": "Cutscenes/CutsceneTrigger.cs", "language": "unity", "function_name": "OnTriggerEnter", "start_line": 58, "end_line": 62, "comment": "THIS WILL BE REMOVED LATER WHEN WE HAVE ALL EVENTS SET UP, NOW WE ONLY NEED IT TO TEST CUTSCENE WITH TRIGGER\n\nRemember to remove collider componenet when we remove this\n", "code": "\tprivate void OnTriggerEnter(Collider other)\n\t{\n\t\t//Fake event raise to test quicker\n\t\t_playSpeceficCutscene.RaiseEvent();\n\t}\n"}
{"file": "Cutscenes/DialogueControlTrack/DialogueBehaviour.cs", "language": "unity", "function_name": "ProcessFrame", "start_line": 22, "end_line": 45, "comment": "<summary>\n\nDisplays a line of dialogue on screen by interfacing with the <c>CutsceneManager</c>. \n\n</summary>\n", "code": "\tpublic override void ProcessFrame(Playable playable, FrameData info, object playerData)\n\t{\n\t\tif (_dialoguePlayed)\n\t\t\treturn;\n\n\t\tif (Application.isPlaying)  //TODO: Find a way to \"play\" dialogue lines even when scrubbing the Timeline not in Play Mode\n\t\t{\n\t\t\t// Need to ask the CutsceneManager if the cutscene is playing, since the graph is not actually stopped/paused: it's just going at speed 0.\n\t\t\tif (playable.GetGraph().IsPlaying())\n\t\t\t//&& cutsceneManager.IsCutscenePlaying) Need to find an alternative to this \n\t\t\t{\n\t\t\t\tif (_dialogueLine != null && _actor != null)\n\t\t\t\t{\n\t\t\t\t\tif (PlayDialogueEvent != null)\n\t\t\t\t\t\tPlayDialogueEvent.RaiseEvent(_dialogueLine, _actor);\n\t\t\t\t\t_dialoguePlayed = true;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tDebug.LogWarning(\"This clip contains no DialogueLine\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n"}
{"file": "UI/FadeController.cs", "language": "unity", "function_name": "InitiateFade", "start_line": 26, "end_line": 29, "comment": "<summary>\n\nControls the fade-in and fade-out.\n\n</summary>\n\n<param name=\"fadeIn\">If false, the screen becomes black. If true, rectangle fades out and gameplay is visible.</param>\n\n<param name=\"duration\">How long it takes to the image to fade in/out.</param>\n\n<param name=\"color\">Target color for the image to reach. Disregarded when fading out.</param>\n", "code": "\tprivate void InitiateFade(bool fadeIn, float duration, Color desiredColor)\n\t{\n\t\t_imageComponent.DOBlendableColor(desiredColor, duration);\n\t}\n"}
{"file": "Dialogues/DialogueManager.cs", "language": "unity", "function_name": "dialogue", "start_line": 7, "end_line": 176, "comment": "<summary>\n\nTakes care of all things dialogue, whether they are coming from within a Timeline or just from the interaction with a character, or by any other mean.\n", "code": "/// Keeps track of choices in the dialogue (if any) and then gives back control to gameplay when appropriate.\n/// </summary>\npublic class DialogueManager : MonoBehaviour\n{\n\t[SerializeField] private List<ActorSO> _actorsList = default;\n\t[SerializeField] private InputReader _inputReader = default;\n\t[SerializeField] private GameStateSO _gameState = default;\n\n\t[Header(\"Listening on\")]\n\t[SerializeField] private DialogueDataChannelSO _startDialogue = default;\n\t[SerializeField] private DialogueChoiceChannelSO _makeDialogueChoiceEvent = default;\n\n\t[Header(\"Broadcasting on\")]\n\t[SerializeField] private DialogueLineChannelSO _openUIDialogueEvent = default;\n\t[SerializeField] private DialogueChoicesChannelSO _showChoicesUIEvent = default;\n\t[SerializeField] private IntEventChannelSO _endDialogueWithTypeEvent = default;\n\t[SerializeField] private VoidEventChannelSO _continueWithStep = default;\n\t[SerializeField] private VoidEventChannelSO _playIncompleteDialogue = default;\n\t[SerializeField] private VoidEventChannelSO _makeWinningChoice = default;\n\t[SerializeField] private VoidEventChannelSO _makeLosingChoice = default;\n\n\tprivate int _counterDialogue;\n\tprivate int _counterLine;\n\tprivate bool _reachedEndOfDialogue { get => _counterDialogue >= _currentDialogue.Lines.Count; }\n\tprivate bool _reachedEndOfLine { get => _counterLine >= _currentDialogue.Lines[_counterDialogue].TextList.Count; }\n\tprivate DialogueDataSO _currentDialogue = default;\n\n\tprivate void Start()\n\t{\n\t\t_startDialogue.OnEventRaised += DisplayDialogueData;\n\t}\n\n\t/// <summary>\n\t/// Displays DialogueData in the UI, one by one.\n\t/// </summary>\n\tpublic void DisplayDialogueData(DialogueDataSO dialogueDataSO)\n\t{\n\t\tif (_gameState.CurrentGameState != GameState.Cutscene) // the dialogue state is implied in the cutscene state\n\t\t\t_gameState.UpdateGameState(GameState.Dialogue);\n\n\t\t_counterDialogue = 0;\n\t\t_counterLine = 0;\n\t\t_inputReader.EnableDialogueInput();\n\t\t_inputReader.AdvanceDialogueEvent += OnAdvance;\n\t\t_currentDialogue = dialogueDataSO;\n\n\t\tif (_currentDialogue.Lines != null)\n\t\t{\n\t\t\tActorSO currentActor = _actorsList.Find(o => o.ActorId == _currentDialogue.Lines[_counterDialogue].Actor); // we don't add a controle, because we need a null reference exeption if the actor is not in the list\n\t\t\tDisplayDialogueLine(_currentDialogue.Lines[_counterDialogue].TextList[_counterLine], currentActor);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDebug.LogError(\"Check Dialogue\");\n\t\t}\n\t}\n\n\t/// <summary>\n\t/// Displays a line of dialogue in the UI, by requesting it to the <c>DialogueManager</c>.\n\t/// This function is also called by <c>DialogueBehaviour</c> from clips on Timeline during cutscenes.\n\t/// </summary>\n\t/// <param name=\"dialogueLine\"></param>\n\tpublic void DisplayDialogueLine(LocalizedString dialogueLine, ActorSO actor)\n\t{\n\t\t_openUIDialogueEvent.RaiseEvent(dialogueLine, actor);\n\t}\n\n\tprivate void OnAdvance()\n\t{\n\t\t_counterLine++;\n\t\tif (!_reachedEndOfLine)\n\t\t{\n\t\t\tActorSO currentActor = _actorsList.Find(o => o.ActorId == _currentDialogue.Lines[_counterDialogue].Actor); // we don't add a controle, because we need a null reference exeption if the actor is not in the list\n\t\t\tDisplayDialogueLine(_currentDialogue.Lines[_counterDialogue].TextList[_counterLine], currentActor);\n\t\t}\n\t\telse if (_currentDialogue.Lines[_counterDialogue].Choices != null\n\t\t\t\t&& _currentDialogue.Lines[_counterDialogue].Choices.Count > 0)\n\t\t{\n\t\t\tif (_currentDialogue.Lines[_counterDialogue].Choices.Count > 0)\n\t\t\t{\n\t\t\t\tDisplayChoices(_currentDialogue.Lines[_counterDialogue].Choices);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\t_counterDialogue++;\n\t\t\tif (!_reachedEndOfDialogue)\n\t\t\t{\n\t\t\t\t_counterLine = 0;\n\n\t\t\t\tActorSO currentActor = _actorsList.Find(o => o.ActorId == _currentDialogue.Lines[_counterDialogue].Actor); // we don't add a controle, because we need a null reference exeption if the actor is not in the list\n\t\t\t\tDisplayDialogueLine(_currentDialogue.Lines[_counterDialogue].TextList[_counterLine], currentActor);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDialogueEndedAndCloseDialogueUI();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void DisplayChoices(List<Choice> choices)\n\t{\n\t\t_inputReader.AdvanceDialogueEvent -= OnAdvance;\n\n\t\t_makeDialogueChoiceEvent.OnEventRaised += MakeDialogueChoice;\n\t\t_showChoicesUIEvent.RaiseEvent(choices);\n\t}\n\n\tprivate void MakeDialogueChoice(Choice choice)\n\t{\n\t\t_makeDialogueChoiceEvent.OnEventRaised -= MakeDialogueChoice;\n\n\t\tswitch (choice.ActionType)\n\t\t{\n\t\t\tcase ChoiceActionType.ContinueWithStep:\n\t\t\t\tif (_continueWithStep != null)\n\t\t\t\t\t_continueWithStep.RaiseEvent();\n\t\t\t\tif (choice.NextDialogue != null)\n\t\t\t\t\tDisplayDialogueData(choice.NextDialogue);\n\t\t\t\tbreak;\n\n\t\t\tcase ChoiceActionType.WinningChoice:\n\t\t\t\tif (_makeWinningChoice != null)\n\t\t\t\t\t_makeWinningChoice.RaiseEvent();\n\t\t\t\tbreak;\n\n\t\t\tcase ChoiceActionType.LosingChoice:\n\t\t\t\tif (_makeLosingChoice != null)\n\t\t\t\t\t_makeLosingChoice.RaiseEvent();\n\t\t\t\tbreak;\n\n\t\t\tcase ChoiceActionType.DoNothing:\n\t\t\t\tif (choice.NextDialogue != null)\n\t\t\t\t\tDisplayDialogueData(choice.NextDialogue);\n\t\t\t\telse\n\t\t\t\t\tDialogueEndedAndCloseDialogueUI();\n\t\t\t\tbreak;\n\n\t\t\tcase ChoiceActionType.IncompleteStep:\n\t\t\t\tif (_playIncompleteDialogue != null)\n\t\t\t\t\t_playIncompleteDialogue.RaiseEvent();\n\t\t\t\tif (choice.NextDialogue != null)\n\t\t\t\t\tDisplayDialogueData(choice.NextDialogue);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tpublic void CutsceneDialogueEnded()\n\t{\n\t\tif (_endDialogueWithTypeEvent != null)\n\t\t\t_endDialogueWithTypeEvent.RaiseEvent((int)DialogueType.DefaultDialogue);\n\t}\n\n\tprivate void DialogueEndedAndCloseDialogueUI()\n\t{\n\t\t//raise the special event for end of dialogue if any \n\t\t_currentDialogue.FinishDialogue();\n\n\t\t//raise end dialogue event \n\t\tif (_endDialogueWithTypeEvent != null)\n\t\t\t_endDialogueWithTypeEvent.RaiseEvent((int)_currentDialogue.DialogueType);\n\n\t\t_inputReader.AdvanceDialogueEvent -= OnAdvance;\n\t\t_gameState.ResetToPreviousGameState();\n\t\t\n\t\tif (_gameState.CurrentGameState == GameState.Gameplay\n\t\t\t|| _gameState.CurrentGameState == GameState.Combat)\n\t\t\t_inputReader.EnableGameplayInput();\n\t}\n}\n"}
{"file": "Dialogues/DialogueDataSO.cs", "language": "unity", "function_name": "CreateAssetMenu", "start_line": 33, "end_line": 92, "comment": "<summary>\n\nA Dialogue is a list of consecutive DialogueLines. They play in sequence using the input of the player to skip forward.\n\nIn future versions it might contain support for branching conversations.\n\n</summary>\n", "code": "[CreateAssetMenu(fileName = \"new Dialogue\", menuName = \"Dialogues/Dialogue Data\")]\npublic class DialogueDataSO : ScriptableObject\n{\n\t[SerializeField] private List<Line> _lines = default;\n\t[SerializeField] private DialogueType _dialogueType = default;\n\t[SerializeField] private VoidEventChannelSO _endOfDialogueEvent = default;\n\t\n\tpublic VoidEventChannelSO EndOfDialogueEvent => _endOfDialogueEvent;\n\tpublic List<Line> Lines => _lines;\n\n\tpublic DialogueType DialogueType\n\t{\n\t\tget { return _dialogueType; }\n\t\tset { _dialogueType = value; }\n\t}\n\n\tpublic void FinishDialogue()\n\t{\n\t\tif (EndOfDialogueEvent != null)\n\t\t\tEndOfDialogueEvent.RaiseEvent();\n\t}\n\n#if UNITY_EDITOR\n\tprivate void OnEnable()\n\t{\n\t\tSetDialogueLines(this.name);\n\t}\n\tpublic DialogueDataSO(string dialogueName)\n\t{\n\t\tSetDialogueLines(dialogueName);\n\t}\n\tvoid SetDialogueLines(string dialogueName)\n\t{\n\t\tif (_lines == null)\n\t\t\t_lines = new List<Line>();\n\n\t\t_lines.Clear();\n\t\tint dialogueIndex = 0;\n\t\tLine _dialogueLine = new Line();\n\n\t\tdo\n\t\t{\n\t\t\tdialogueIndex++;\n\t\t\t_dialogueLine = new Line(\"D\" + dialogueIndex + \"-\" + dialogueName);\n\t\t\tif (_dialogueLine.TextList != null)\n\t\t\t\t_lines.Add(_dialogueLine);\n\n\t\t} while (_dialogueLine.TextList != null);\n\t}\n\n\t/// <summary>\n\t/// This function is only useful for the Questline Tool in Editor to remove a Questline\n\t/// </summary>\n\t/// <returns>The local path</returns>\n\tpublic string GetPath()\n\t{\n\t\treturn AssetDatabase.GetAssetPath(this);\n\t}\n#endif\n}\n"}
{"file": "Dialogues/ActorSO.cs", "language": "unity", "function_name": "CreateAssetMenu", "start_line": 20, "end_line": 28, "comment": "<summary>\n\nScriptable Object that represents an \"Actor\", that is the protagonist of a Dialogue\n\n</summary>\n", "code": "[CreateAssetMenu(fileName = \"newActor\", menuName = \"Dialogues/Actor\")]\npublic class ActorSO : ScriptableObject\n{\n\t[SerializeField] private ActorID _actorId = default;\n\t[SerializeField] private LocalizedString _actorName = default;\n\n\tpublic ActorID ActorId { get => _actorId; }\n\tpublic LocalizedString ActorName { get => _actorName; }\n}\n"}
{"file": "Camera/CameraManager.cs", "language": "unity", "function_name": "SetupProtagonistVirtualCamera", "start_line": 105, "end_line": 112, "comment": "<summary>\n\nProvides Cinemachine with its target, taken from the TransformAnchor SO containing a reference to the player's Transform component.\n\nThis method is called every time the player is reinstantiated.\n\n</summary>\n", "code": "\tpublic void SetupProtagonistVirtualCamera()\n\t{\n\t\tTransform target = _protagonistTransformAnchor.Value;\n\n\t\tfreeLookVCam.Follow = target;\n\t\tfreeLookVCam.LookAt = target;\n\t\tfreeLookVCam.OnTargetObjectWarped(target, target.position - freeLookVCam.transform.position - Vector3.forward);\n\t}\n"}
{"file": "StateMachine/Core/StateTransition.cs", "language": "unity", "function_name": "TryGetTransiton", "start_line": 29, "end_line": 33, "comment": "<summary>\n\nChecks wether the conditions to transition to the target state are met.\n\n</summary>\n\n<param name=\"state\">Returns the state to transition to. Null if the conditions aren't met.</param>\n\n<returns>True if the conditions are met.</returns>\n", "code": "\t\tpublic bool TryGetTransiton(out State state)\n\t\t{\n\t\t\tstate = ShouldTransition() ? _targetState : null;\n\t\t\treturn state != null;\n\t\t}\n"}
{"file": "StateMachine/Core/StateAction.cs", "language": "unity", "function_name": "Awake", "start_line": 26, "end_line": 26, "comment": "<summary>\n\nAwake is called when creating a new instance. Use this method to cache the components needed for the action.\n\n</summary>\n\n<param name=\"stateMachine\">The <see cref=\"StateMachine\"/> this instance belongs to.</param>\n", "code": "\t\tpublic virtual void Awake(StateMachine stateMachine) { }\n"}
{"file": "StateMachine/Core/StateCondition.cs", "language": "unity", "function_name": "GetStatement", "start_line": 28, "end_line": 37, "comment": "<summary>\n\nWrap the <see cref=\"Statement\"/> so it can be cached.\n\n</summary>\n", "code": "\t\tinternal bool GetStatement()\n\t\t{\n\t\t\tif (!_isCached)\n\t\t\t{\n\t\t\t\t_isCached = true;\n\t\t\t\t_cachedStatement = Statement();\n\t\t\t}\n\n\t\t\treturn _cachedStatement;\n\t\t}\n"}
{"file": "StateMachine/Core/StateCondition.cs", "language": "unity", "function_name": "Awake", "start_line": 48, "end_line": 48, "comment": "<summary>\n\nAwake is called when creating a new instance. Use this method to cache the components needed for the condition.\n\n</summary>\n\n<param name=\"stateMachine\">The <see cref=\"StateMachine\"/> this instance belongs to.</param>\n", "code": "\t\tpublic virtual void Awake(StateMachine stateMachine) { }\n"}
{"file": "StateMachine/ScriptableObjects/StateConditionSO.cs", "language": "unity", "function_name": "GetCondition", "start_line": 11, "end_line": 24, "comment": "<summary>\n\nWill create a new custom <see cref=\"Condition\"/> or use an existing one inside <paramref name=\"createdInstances\"/>.\n\n</summary>\n", "code": "\t\tinternal StateCondition GetCondition(StateMachine stateMachine, bool expectedResult, Dictionary<ScriptableObject, object> createdInstances)\n\t\t{\n\t\t\tif (!createdInstances.TryGetValue(this, out var obj))\n\t\t\t{\n\t\t\t\tvar condition = CreateCondition();\n\t\t\t\tcondition._originSO = this;\n\t\t\t\tcreatedInstances.Add(this, condition);\n\t\t\t\tcondition.Awake(stateMachine);\n\n\t\t\t\tobj = condition;\n\t\t\t}\n\n\t\t\treturn new StateCondition(stateMachine, (Condition)obj, expectedResult);\n\t\t}\n"}
{"file": "StateMachine/ScriptableObjects/StateActionSO.cs", "language": "unity", "function_name": "GetAction", "start_line": 11, "end_line": 21, "comment": "<summary>\n\nWill create a new custom <see cref=\"StateAction\"/> or return an existing one inside <paramref name=\"createdInstances\"/>\n\n</summary>\n", "code": "\t\tinternal StateAction GetAction(StateMachine stateMachine, Dictionary<ScriptableObject, object> createdInstances)\n\t\t{\n\t\t\tif (createdInstances.TryGetValue(this, out var obj))\n\t\t\t\treturn (StateAction)obj;\n\n\t\t\tvar action = CreateAction();\n\t\t\tcreatedInstances.Add(this, action);\n\t\t\taction._originSO = this;\n\t\t\taction.Awake(stateMachine);\n\t\t\treturn action;\n\t\t}\n"}
{"file": "StateMachine/Editor/TransitionTableEditorWindow.cs", "language": "unity", "function_name": "OnFocus", "start_line": 58, "end_line": 64, "comment": "<summary>\n\nUpdate list every time we gain focus\n\n</summary>\n", "code": "\t\tprivate void OnFocus()\n\t\t{\n\t\t\t// Calling CreateListView() from here when the window is docked\n\t\t\t// throws a NullReferenceException in UnityEditor.DockArea:OnEnable().\n\t\t\tif (_doRefresh == false)\n\t\t\t\t_doRefresh = true;\n\t\t}\n"}
{"file": "EditorTools/MonoBehaviours/LightmapScaleSetter.cs", "language": "unity", "function_name": "OnValidate", "start_line": 11, "end_line": 25, "comment": "Called when the Lightmap Scale field is changed in the component editor\n", "code": "\tprivate void OnValidate()\n    {\n        // Clamp the lightmap scale to the range [0,1]\n        if (_lightmapScale < 0f)\n        {\n            _lightmapScale = 0f;\n        }\n\n        // Update lightmap scale for MeshRenderers within component and all descendants\n        MeshRenderer[] meshRenderers = GetComponentsInChildren<MeshRenderer>();\n        foreach (MeshRenderer meshRenderer in meshRenderers)\n        {\n            meshRenderer.scaleInLightmap = _lightmapScale;\n        }\n    }\n"}
{"file": "EditorTools/MonoBehaviours/LocationTeleporterButton.cs", "language": "unity", "function_name": "IssueTeleport", "start_line": 25, "end_line": 28, "comment": "Called by the UI button's UnityEvent\n", "code": "\tpublic void IssueTeleport()\n\t{\n\t\t_teleporter.Teleport(_location, _path);\n\t}\n"}
{"file": "EditorTools/Attributes/ReadOnlyAttribute/Editor/ReadOnlyDrawer.cs", "language": "unity", "function_name": "CustomPropertyDrawer", "start_line": 7, "end_line": 18, "comment": "<summary>\n\nCustom drawer for the ReadOnly attribute\n\n</summary>\n", "code": "[CustomPropertyDrawer(typeof(ReadOnlyAttribute))]\npublic class ReadOnlyDrawer : PropertyDrawer\n{\n    public override void OnGUI(Rect position, SerializedProperty property, GUIContent label)\n    {\n        bool previousGUIState = GUI.enabled;\n\n        GUI.enabled = false;\n        EditorGUI.PropertyField(position, property, label);\n        GUI.enabled = previousGUIState;\n    }\n}"}
{"file": "EditorTools/Editor/CustomBaseEditor.cs", "language": "unity", "function_name": "DrawNonEditableScriptReference", "start_line": 14, "end_line": 24, "comment": "<summary>\n\nDraw the default, non-editable script field. Useful when creating a custom Inspector but we want it to look like a default one.\n\nPlus, it's handy to be able to click on the field to ping the Script in the Project window.\n\n</summary>\n\n<typeparam name=\"T\">Inspected type.</typeparam>\n", "code": "\tpublic void DrawNonEditableScriptReference<T>() where T : Object\n\t{\n\t\tGUI.enabled = false;\n\n\t\tif (typeof(ScriptableObject).IsAssignableFrom(typeof(T)))\n\t\t\tEditorGUILayout.ObjectField(\"Script\", MonoScript.FromScriptableObject((ScriptableObject)target), typeof(T), false);\n\t\telse if (typeof(MonoBehaviour).IsAssignableFrom(typeof(T)))\n\t\t\tEditorGUILayout.ObjectField(\"Script\", MonoScript.FromMonoBehaviour((MonoBehaviour)target), typeof(T), false);\n\n\t\tGUI.enabled = true;\n\t}\n"}
{"file": "EditorTools/Editor/ScriptableObjectBrowser/ScriptableObjectBrowser.cs", "language": "unity", "function_name": "DrawTypeButtons", "start_line": 101, "end_line": 116, "comment": "<summary>\n\nDraws a scroll view list of Buttons for each ScriptableObject type.\n\n</summary>\n", "code": "\tprivate void DrawTypeButtons()\n\t{\n\t\t_typeScrollViewPosition = GUILayout.BeginScrollView(_typeScrollViewPosition);\n\n\t\tfor (int i = 0; i < _types.Count; i++)\n\t\t{\n\t\t\tif (GUILayout.Button(GetNiceName(_types.ElementAt(i).Key), EditorStyles.foldout))\n\t\t\t{\n\t\t\t\t_typeIndex = i;\n\t\t\t\tGetAssets();\n\t\t\t\t_showingTypes = false;\n\t\t\t}\n\t\t}\n\n\t\tGUILayout.EndScrollView();\n\t}\n"}
{"file": "EditorTools/Editor/ScriptableObjectBrowser/ScriptableObjectBrowser.cs", "language": "unity", "function_name": "DrawAssetButtons", "start_line": 121, "end_line": 141, "comment": "<summary>\n\nDraws a scroll view list of Buttons for each ScriptableObject asset file of selected type. \n\n</summary>\n", "code": "\tprivate void DrawAssetButtons()\n\t{\n\t\t_assetScrollViewPosition = GUILayout.BeginScrollView(_assetScrollViewPosition);\n\n\t\tfor (int i = 0; i < _assets.Count; i++)\n\t\t{\n\t\t\tif (GUILayout.Button(GetNiceName(_assets.ElementAt(i).Value.name), ButtonStyle))\n\t\t\t{\n\t\t\t\tSelection.activeObject = _assets.ElementAt(i).Value;\n\n\t\t\t\tif (_lastAssetIndex == i)\n\t\t\t\t{\n\t\t\t\t\tEditorGUIUtility.PingObject(_assets.ElementAt(i).Value);\n\t\t\t\t}\n\n\t\t\t\t_lastAssetIndex = i;\n\t\t\t}\n\t\t}\n\n\t\tGUILayout.EndScrollView();\n\t}\n"}
{"file": "EditorTools/Editor/ScriptableObjectBrowser/ScriptableObjectBrowser.cs", "language": "unity", "function_name": "GetTypes", "start_line": 146, "end_line": 169, "comment": "<summary>\n\nGets all ScriptableObject types in project.\n\n</summary>\n", "code": "\tprivate void GetTypes()\n\t{\n\t\tstring[] GUIDs = AssetDatabase.FindAssets(\"t:ScriptableObject\",\n\t\t\tnew string[] { \"Assets/ScriptableObjects\" });\n\t\tScriptableObject[] SOs = new ScriptableObject[GUIDs.Length];\n\n\t\tfor (int i = 0; i < GUIDs.Length; i++)\n\t\t{\n\t\t\tstring path = AssetDatabase.GUIDToAssetPath(GUIDs[i]);\n\t\t\tSOs[i] = (ScriptableObject)AssetDatabase.LoadAssetAtPath(path, typeof(ScriptableObject));\n\t\t}\n\n\t\t_types.Clear();\n\n\t\tfor (int i = 0; i < SOs.Length; i++)\n\t\t{\n\t\t\tstring typeKey = SOs[i].GetType().Name;\n\n\t\t\tif (!_types.ContainsKey(typeKey))\n\t\t\t{\n\t\t\t\t_types.Add(typeKey, SOs[i].GetType());\n\t\t\t}\n\t\t}\n\t}\n"}
{"file": "EditorTools/Editor/ScriptableObjectBrowser/ScriptableObjectBrowser.cs", "language": "unity", "function_name": "GetAssets", "start_line": 174, "end_line": 186, "comment": "<summary>\n\nGets all ScriptableObject asset files of selected type.\n\n</summary>\n", "code": "\tprivate void GetAssets()\n\t{\n\t\tstring[] GUIDs = AssetDatabase.FindAssets(\"t:\" + _types.ElementAt(_typeIndex).Value.FullName);\n\n\t\t_assets.Clear();\n\n\t\tfor (int i = 0; i < GUIDs.Length; i++)\n\t\t{\n\t\t\tstring path = AssetDatabase.GUIDToAssetPath(GUIDs[i]);\n\t\t\tvar SO = AssetDatabase.LoadAssetAtPath(path, typeof(ScriptableObject)) as ScriptableObject;\n\t\t\t_assets.Add(path, SO);\n\t\t}\n\t}\n"}
{"file": "EditorTools/Editor/ScriptableObjectBrowser/ScriptableObjectBrowser.cs", "language": "unity", "function_name": "GetNiceName", "start_line": 191, "end_line": 199, "comment": "<summary>\n\nFormats string of text to look prettier and more readable.\n\n</summary>\n", "code": "\tprivate string GetNiceName(string text)\n\t{\n\t\tstring niceText = text;\n\t\tniceText = ObjectNames.NicifyVariableName(niceText);\n\t\tniceText = niceText.Replace(\" SO\", \"\");\n\t\tniceText = niceText.Replace(\"-\", \" \");\n\t\tniceText = niceText.Replace(\"_\", \" \");\n\t\treturn niceText;\n\t}\n"}
{"file": "EditorTools/Editor/ReplaceObject_Window/ReplaceTool.cs", "language": "unity", "function_name": "MenuItem", "start_line": 41, "end_line": 46, "comment": "Register menu item to open Window\n", "code": "\t[MenuItem(\"ChopChop/Replace with Prefab\")]\n\tpublic static void ShowWindow()\n\t{\n\t\tvar window = GetWindow<ReplaceTool>();\n\t\twindow.Show();\n\t}\n"}
{"file": "EditorTools/Editor/ReplaceObject_Window/ReplaceTool.cs", "language": "unity", "function_name": "ReplaceSelectedObjects", "start_line": 133, "end_line": 162, "comment": "<summary>\n\nReplaces game objects with provided replace object.\n\n</summary>\n\n<param name=\"objectToReplace\">Game Objects to replace.</param>\n\n<param name=\"replaceObject\">Prefab that will be instantiated in place of the objects to replace.</param>\n", "code": "\tinternal static void ReplaceSelectedObjects(GameObject[] objectToReplace, GameObject replaceObject)\n\t{\n\t\tvar newInstances = new int[objectToReplace.Length];\n\n\t\tfor (int i = 0; i < objectToReplace.Length; i++)\n\t\t{\n\t\t\tvar go = objectToReplace[i];\n\n\t\t\tUndo.RegisterCompleteObjectUndo(go, \"Saving game object state\");\n\n\t\t\tvar sibling = go.transform.GetSiblingIndex();\n\t\t\tvar inst = (GameObject)PrefabUtility.InstantiatePrefab(replaceObject);\n\t\t\tnewInstances[i] = inst.GetInstanceID();\n\n\t\t\tinst.transform.position = go.transform.position;\n\t\t\tinst.transform.rotation = go.transform.rotation;\n\t\t\tinst.transform.parent = go.transform.parent;\n\t\t\tinst.transform.localScale = go.transform.localScale;\n\t\t\tinst.transform.SetSiblingIndex(sibling);\n\n\t\t\tUndo.RegisterCreatedObjectUndo(inst, \"Replacement creation.\");\n\t\t\tforeach (Transform child in go.transform)\n\t\t\t{\n\t\t\t\tUndo.SetTransformParent(child, inst.transform, \"Parent Change\");\n\t\t\t}\n\t\t\tUndo.DestroyObjectImmediate(go);\n\t\t}\n\n\t\tSelection.instanceIDs = newInstances;\n\t}\n"}
{"file": "RuntimeAnchors/PathStorageSO.cs", "language": "unity", "function_name": "last", "start_line": 4, "end_line": 11, "comment": "<summary>\n", "code": "/// This one of a kind SO stores, during gameplay, the path that was used last (i.e. the one that was taken to get to the current scene).\n/// </summary>\n//[CreateAssetMenu(fileName = \"PathStorage\", menuName = \"Gameplay/Path Storage\")]\npublic class PathStorageSO : DescriptionBaseSO\n{\n\t[Space]\n\t[ReadOnly] public PathSO lastPathTaken;\n}\n"}
{"file": "Audio/AudioConfigApplier.cs", "language": "unity", "function_name": "RequireComponent", "start_line": 7, "end_line": 30, "comment": "<summary>\n\nHelper component, to quickly apply the settings from an <c>AudioConfigurationSO</c> SO to an <c>AudioSource</c>.\n\nUseful to add a configuration to the AudioSource that a Timeline is pointing to.\n\n</summary>\n", "code": "[RequireComponent(typeof(AudioSource))]\npublic class AudioConfigApplier : MonoBehaviour\n{\n\tpublic AudioConfigurationSO config;\n\n\tprivate void OnValidate()\n\t{\n\t\tConfigureAudioSource();\n\t}\n\n\tprivate void Start()\n\t{\n\t\tConfigureAudioSource();\n\t}\n\n\tprivate void ConfigureAudioSource()\n\t{\n\t\tif (config != null)\n\t\t{\n\t\t\tAudioSource audioSource = GetComponent<AudioSource>();\n\t\t\tconfig.ApplyTo(audioSource);\n\t\t}\n\t}\n}\n"}
{"file": "Audio/AudioManager.cs", "language": "unity", "function_name": "OnValidate", "start_line": 76, "end_line": 84, "comment": "<summary>\n\nThis is only used in the Editor, to debug volumes.\n\nIt is called when any of the variables is changed, and will directly change the value of the volumes on the AudioMixer.\n\n</summary>\n", "code": "\tvoid OnValidate()\n\t{\n\t\tif (Application.isPlaying)\n\t\t{\n\t\t\tSetGroupVolume(\"MasterVolume\", _masterVolume);\n\t\t\tSetGroupVolume(\"MusicVolume\", _musicVolume);\n\t\t\tSetGroupVolume(\"SFXVolume\", _sfxVolume);\n\t\t}\n\t}\n"}
{"file": "Audio/AudioManager.cs", "language": "unity", "function_name": "MixerValueToNormalized", "start_line": 122, "end_line": 126, "comment": "Both MixerValueNormalized and NormalizedToMixerValue functions are used for easier transformations\n\nwhen using UI sliders normalized format\n", "code": "\tprivate float MixerValueToNormalized(float mixerValue)\n\t{\n\t\t// We're assuming the range [-80dB to 0dB] becomes [0 to 1]\n\t\treturn 1f + (mixerValue / 80f);\n\t}\n"}
{"file": "Audio/AudioManager.cs", "language": "unity", "function_name": "TimelineInterruptsMusic", "start_line": 171, "end_line": 174, "comment": "<summary>\n\nOnly used by the timeline to stop the gameplay music during cutscenes.\n\nCalled by the SignalReceiver present on this same GameObject.\n\n</summary>\n", "code": "\tpublic void TimelineInterruptsMusic()\n\t{\n\t\tStopMusic(AudioCueKey.Invalid);\n\t}\n"}
{"file": "Audio/AudioManager.cs", "language": "unity", "function_name": "PlayAudioCue", "start_line": 179, "end_line": 197, "comment": "<summary>\n\nPlays an AudioCue by requesting the appropriate number of SoundEmitters from the pool.\n\n</summary>\n", "code": "\tpublic AudioCueKey PlayAudioCue(AudioCueSO audioCue, AudioConfigurationSO settings, Vector3 position = default)\n\t{\n\t\tAudioClip[] clipsToPlay = audioCue.GetClips();\n\t\tSoundEmitter[] soundEmitterArray = new SoundEmitter[clipsToPlay.Length];\n\n\t\tint nOfClips = clipsToPlay.Length;\n\t\tfor (int i = 0; i < nOfClips; i++)\n\t\t{\n\t\t\tsoundEmitterArray[i] = _pool.Request();\n\t\t\tif (soundEmitterArray[i] != null)\n\t\t\t{\n\t\t\t\tsoundEmitterArray[i].PlayAudioClip(clipsToPlay[i], settings, audioCue.looping, position);\n\t\t\t\tif (!audioCue.looping)\n\t\t\t\t\tsoundEmitterArray[i].OnSoundFinishedPlaying += OnSoundEmitterFinishedPlaying;\n\t\t\t}\n\t\t}\n\n\t\treturn _soundEmitterVault.Add(audioCue, soundEmitterArray);\n\t}\n"}
{"file": "Audio/AudioCueOnTriggerEnter.cs", "language": "unity", "function_name": "GameObject", "start_line": 7, "end_line": 20, "comment": "<summary>\n", "code": "\t/// Class to activate AudioCues when a GameObject (i.e. the Player) enters the trigger Collider on this same GameObject.\n\t/// This component is mostly used for testing purposes.\n\t/// </summary>\n\t[RequireComponent(typeof(AudioCue))]\n\tpublic class AudioCueOnTriggerEnter : MonoBehaviour\n\t{\n\t\t[SerializeField] private string _tagToDetect = \"Player\";\n\t\t\n\t\tprivate void OnTriggerEnter(Collider other)\n\t\t{\n\t\t\tif (other.gameObject.CompareTag(_tagToDetect))\n\t\t\t\tGetComponent<AudioCue>().PlayAudioCue();\n\t\t}\n\t}\n"}
{"file": "Audio/AudioData/AudioCueSO.cs", "language": "unity", "function_name": "CreateAssetMenu", "start_line": 7, "end_line": 25, "comment": "<summary>\n\nA collection of audio clips that are played in parallel, and support randomisation.\n\n</summary>\n", "code": "[CreateAssetMenu(fileName = \"newAudioCue\", menuName = \"Audio/Audio Cue\")]\npublic class AudioCueSO : ScriptableObject\n{\n\tpublic bool looping = false;\n\t[SerializeField] private AudioClipsGroup[] _audioClipGroups = default;\n\n\tpublic AudioClip[] GetClips()\n\t{\n\t\tint numberOfClips = _audioClipGroups.Length;\n\t\tAudioClip[] resultingClips = new AudioClip[numberOfClips];\n\n\t\tfor (int i = 0; i < numberOfClips; i++)\n\t\t{\n\t\t\tresultingClips[i] = _audioClipGroups[i].GetNextClip();\n\t\t}\n\n\t\treturn resultingClips;\n\t}\n}\n"}
{"file": "Audio/AudioData/AudioCueSO.cs", "language": "unity", "function_name": "GetNextClip", "start_line": 44, "end_line": 80, "comment": "<summary>\n\nChooses the next clip in the sequence, either following the order or randomly.\n\n</summary>\n\n<returns>A reference to an AudioClip</returns>\n", "code": "\tpublic AudioClip GetNextClip()\n\t{\n\t\t// Fast out if there is only one clip to play\n\t\tif (audioClips.Length == 1)\n\t\t\treturn audioClips[0];\n\n\t\tif (_nextClipToPlay == -1)\n\t\t{\n\t\t\t// Index needs to be initialised: 0 if Sequential, random if otherwise\n\t\t\t_nextClipToPlay = (sequenceMode == SequenceMode.Sequential) ? 0 : UnityEngine.Random.Range(0, audioClips.Length);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Select next clip index based on the appropriate SequenceMode\n\t\t\tswitch (sequenceMode)\n\t\t\t{\n\t\t\t\tcase SequenceMode.Random:\n\t\t\t\t\t_nextClipToPlay = UnityEngine.Random.Range(0, audioClips.Length);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase SequenceMode.RandomNoImmediateRepeat:\n\t\t\t\t\tdo\n\t\t\t\t\t{\n\t\t\t\t\t\t_nextClipToPlay = UnityEngine.Random.Range(0, audioClips.Length);\n\t\t\t\t\t} while (_nextClipToPlay == _lastClipPlayed);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase SequenceMode.Sequential:\n\t\t\t\t\t_nextClipToPlay = (int)Mathf.Repeat(++_nextClipToPlay, audioClips.Length);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t_lastClipPlayed = _nextClipToPlay;\n\n\t\treturn audioClips[_nextClipToPlay];\n\t}\n"}
{"file": "Audio/AudioData/AudioConfigurationSO.cs", "language": "unity", "function_name": "CreateAssetMenu", "start_line": 5, "end_line": 71, "comment": "TODO: Check which settings we really need at this level\n", "code": "[CreateAssetMenu(menuName = \"Audio/Audio Configuration\")]\npublic class AudioConfigurationSO : ScriptableObject\n{\n\tpublic AudioMixerGroup OutputAudioMixerGroup = null;\n\n\t// Simplified management of priority levels (values are counterintuitive, see enum below)\n\t[SerializeField] private PriorityLevel _priorityLevel = PriorityLevel.Standard;\n\t[HideInInspector]\n\tpublic int Priority\n\t{\n\t\tget { return (int)_priorityLevel; }\n\t\tset { _priorityLevel = (PriorityLevel)value; }\n\t}\n\n\t[Header(\"Sound properties\")]\n\tpublic bool Mute = false;\n\t[Range(0f, 1f)] public float Volume = 1f;\n\t[Range(-3f, 3f)] public float Pitch = 1f;\n\t[Range(-1f, 1f)] public float PanStereo = 0f;\n\t[Range(0f, 1.1f)] public float ReverbZoneMix = 1f;\n\n\t[Header(\"Spatialisation\")]\n\t[Range(0f, 1f)] public float SpatialBlend = 1f;\n\tpublic AudioRolloffMode RolloffMode = AudioRolloffMode.Logarithmic;\n\t[Range(0.01f, 5f)] public float MinDistance = 0.1f;\n\t[Range(5f, 100f)] public float MaxDistance = 50f;\n\t[Range(0, 360)] public int Spread = 0;\n\t[Range(0f, 5f)] public float DopplerLevel = 1f;\n\n\t[Header(\"Ignores\")]\n\tpublic bool BypassEffects = false;\n\tpublic bool BypassListenerEffects = false;\n\tpublic bool BypassReverbZones = false;\n\tpublic bool IgnoreListenerVolume = false;\n\tpublic bool IgnoreListenerPause = false;\n\n\tprivate enum PriorityLevel\n\t{\n\t\tHighest = 0,\n\t\tHigh = 64,\n\t\tStandard = 128,\n\t\tLow = 194,\n\t\tVeryLow = 256,\n\t}\n\n\tpublic void ApplyTo(AudioSource audioSource)\n\t{\n\t\taudioSource.outputAudioMixerGroup = this.OutputAudioMixerGroup;\n\t\taudioSource.mute = this.Mute;\n\t\taudioSource.bypassEffects = this.BypassEffects;\n\t\taudioSource.bypassListenerEffects = this.BypassListenerEffects;\n\t\taudioSource.bypassReverbZones = this.BypassReverbZones;\n\t\taudioSource.priority = this.Priority;\n\t\taudioSource.volume = this.Volume;\n\t\taudioSource.pitch = this.Pitch;\n\t\taudioSource.panStereo = this.PanStereo;\n\t\taudioSource.spatialBlend = this.SpatialBlend;\n\t\taudioSource.reverbZoneMix = this.ReverbZoneMix;\n\t\taudioSource.dopplerLevel = this.DopplerLevel;\n\t\taudioSource.spread = this.Spread;\n\t\taudioSource.rolloffMode = this.RolloffMode;\n\t\taudioSource.minDistance = this.MinDistance;\n\t\taudioSource.maxDistance = this.MaxDistance;\n\t\taudioSource.ignoreListenerVolume = this.IgnoreListenerVolume;\n\t\taudioSource.ignoreListenerPause = this.IgnoreListenerPause;\n\t}\n}\n"}
{"file": "SceneManagement/SceneLoader.cs", "language": "unity", "function_name": "LocationColdStartup", "start_line": 60, "end_line": 73, "comment": "<summary>\n\nThis special loading function is only used in the editor, when the developer presses Play in a Location scene, without passing by Initialisation.\n\n</summary>\n", "code": "\tprivate void LocationColdStartup(GameSceneSO currentlyOpenedLocation, bool showLoadingScreen, bool fadeScreen)\n\t{\n\t\t_currentlyLoadedScene = currentlyOpenedLocation;\n\n\t\tif (_currentlyLoadedScene.sceneType == GameSceneSO.GameSceneType.Location)\n\t\t{\n\t\t\t//Gameplay managers is loaded synchronously\n\t\t\t_gameplayManagerLoadingOpHandle = _gameplayScene.sceneReference.LoadSceneAsync(LoadSceneMode.Additive, true);\n\t\t\t_gameplayManagerLoadingOpHandle.WaitForCompletion();\n\t\t\t_gameplayManagerSceneInstance = _gameplayManagerLoadingOpHandle.Result;\n\n\t\t\tStartGameplay();\n\t\t}\n\t}\n"}
{"file": "SceneManagement/SceneLoader.cs", "language": "unity", "function_name": "LoadLocation", "start_line": 79, "end_line": 100, "comment": "<summary>\n\nThis function loads the location scenes passed as array parameter\n\n</summary>\n", "code": "\tprivate void LoadLocation(GameSceneSO locationToLoad, bool showLoadingScreen, bool fadeScreen)\n\t{\n\t\t//Prevent a double-loading, for situations where the player falls in two Exit colliders in one frame\n\t\tif (_isLoading)\n\t\t\treturn;\n\n\t\t_sceneToLoad = locationToLoad;\n\t\t_showLoadingScreen = showLoadingScreen;\n\t\t_isLoading = true;\n\n\t\t//In case we are coming from the main menu, we need to load the Gameplay manager scene first\n\t\tif (_gameplayManagerSceneInstance.Scene == null\n\t\t\t|| !_gameplayManagerSceneInstance.Scene.isLoaded)\n\t\t{\n\t\t\t_gameplayManagerLoadingOpHandle = _gameplayScene.sceneReference.LoadSceneAsync(LoadSceneMode.Additive, true);\n\t\t\t_gameplayManagerLoadingOpHandle.Completed += OnGameplayManagersLoaded;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tStartCoroutine(UnloadPreviousScene());\n\t\t}\n\t}\n"}
{"file": "SceneManagement/SceneLoader.cs", "language": "unity", "function_name": "LoadMenu", "start_line": 112, "end_line": 128, "comment": "<summary>\n\nPrepares to load the main menu scene, first removing the Gameplay scene in case the game is coming back from gameplay to menus.\n\n</summary>\n", "code": "\tprivate void LoadMenu(GameSceneSO menuToLoad, bool showLoadingScreen, bool fadeScreen)\n\t{\n\t\t//Prevent a double-loading, for situations where the player falls in two Exit colliders in one frame\n\t\tif (_isLoading)\n\t\t\treturn;\n\n\t\t_sceneToLoad = menuToLoad;\n\t\t_showLoadingScreen = showLoadingScreen;\n\t\t_isLoading = true;\n\n\t\t//In case we are coming from a Location back to the main menu, we need to get rid of the persistent Gameplay manager scene\n\t\tif (_gameplayManagerSceneInstance.Scene != null\n\t\t\t&& _gameplayManagerSceneInstance.Scene.isLoaded)\n\t\t\tAddressables.UnloadSceneAsync(_gameplayManagerLoadingOpHandle, true);\n\n\t\tStartCoroutine(UnloadPreviousScene());\n\t}\n"}
{"file": "SceneManagement/SceneLoader.cs", "language": "unity", "function_name": "UnloadPreviousScene", "start_line": 133, "end_line": 159, "comment": "<summary>\n\nIn both Location and Menu loading, this function takes care of removing previously loaded scenes.\n\n</summary>\n", "code": "\tprivate IEnumerator UnloadPreviousScene()\n\t{\n\t\t_inputReader.DisableAllInput();\n\t\t_fadeRequestChannel.FadeOut(_fadeDuration);\n\n\t\tyield return new WaitForSeconds(_fadeDuration);\n\n\t\tif (_currentlyLoadedScene != null) //would be null if the game was started in Initialisation\n\t\t{\n\t\t\tif (_currentlyLoadedScene.sceneReference.OperationHandle.IsValid())\n\t\t\t{\n\t\t\t\t//Unload the scene through its AssetReference, i.e. through the Addressable system\n\t\t\t\t_currentlyLoadedScene.sceneReference.UnLoadScene();\n\t\t\t}\n#if UNITY_EDITOR\n\t\t\telse\n\t\t\t{\n\t\t\t\t//Only used when, after a \"cold start\", the player moves to a new scene\n\t\t\t\t//Since the AsyncOperationHandle has not been used (the scene was already open in the editor),\n\t\t\t\t//the scene needs to be unloaded using regular SceneManager instead of as an Addressable\n\t\t\t\tSceneManager.UnloadSceneAsync(_currentlyLoadedScene.sceneReference.editorAsset.name);\n\t\t\t}\n#endif\n\t\t}\n\n\t\tLoadNewScene();\n\t}\n"}
{"file": "SceneManagement/SceneLoader.cs", "language": "unity", "function_name": "LoadNewScene", "start_line": 164, "end_line": 173, "comment": "<summary>\n\nKicks off the asynchronous loading of a scene, either menu or Location.\n\n</summary>\n", "code": "\tprivate void LoadNewScene()\n\t{\n\t\tif (_showLoadingScreen)\n\t\t{\n\t\t\t_toggleLoadingScreen.RaiseEvent(true);\n\t\t}\n\n\t\t_loadingOperationHandle = _sceneToLoad.sceneReference.LoadSceneAsync(LoadSceneMode.Additive, true, 0);\n\t\t_loadingOperationHandle.Completed += OnNewSceneLoaded;\n\t}\n"}
{"file": "SceneManagement/ScriptableObjects/PersistentManagersSO.cs", "language": "unity", "function_name": "CreateAssetMenu", "start_line": 4, "end_line": 5, "comment": "CreateAssetMenu commented since we don't want to create more than one Initialisation GameSceneSO\n", "code": "//[CreateAssetMenu(fileName = \"PersistentManagers\", menuName = \"Scene Data/PersistentManagers\")]\npublic class PersistentManagersSO : GameSceneSO { }\n"}
{"file": "SceneManagement/ScriptableObjects/PathSO.cs", "language": "unity", "function_name": "CreateAssetMenu", "start_line": 10, "end_line": 11, "comment": "<summary>\n\nPaths are used to determine the connecting entrances and exits between Locations.\n\nThey don't have a direction, so the same path SO can be reused both ways, by referencing it in the appropriate <c>LocationEntrance</c> and <c>LocationExit</c> scripts in the scene.\n\n</summary>\n", "code": "[CreateAssetMenu(fileName = \"BetweenLocation1AndLocation2\", menuName = \"Scene Data/Path\")]\npublic class PathSO : ScriptableObject { }\n"}
{"file": "SceneManagement/ScriptableObjects/LocationSO.cs", "language": "unity", "function_name": "CreateAssetMenu", "start_line": 8, "end_line": 12, "comment": "<summary>\n\nThis class contains Settings specific to Locations only\n\n</summary>\n", "code": "[CreateAssetMenu(fileName = \"NewLocation\", menuName = \"Scene Data/Location\")]\npublic class LocationSO : GameSceneSO\n{\n\tpublic LocalizedString locationName;\n}\n"}
{"file": "SceneManagement/ScriptableObjects/GameplaySO.cs", "language": "unity", "function_name": "CreateAssetMenu", "start_line": 7, "end_line": 9, "comment": "<summary>\n\nThis class contains Settings specific to Gameplay scenes only\n\n</summary>\n", "code": "[CreateAssetMenu(fileName = \"NewGameplayScene\", menuName = \"Scene Data/Gameplay\")]\n\npublic class GameplaySO : GameSceneSO { }\n"}
{"file": "SceneManagement/ScriptableObjects/GameSceneSO.cs", "language": "unity", "function_name": "scenes", "start_line": 5, "end_line": 30, "comment": "<summary>\n", "code": "/// This class is a base class which contains what is common to all game scenes (Locations, Menus, Managers)\n/// </summary>\npublic class GameSceneSO : DescriptionBaseSO\n{\n\tpublic GameSceneType sceneType;\n\tpublic AssetReference sceneReference; //Used at runtime to load the scene from the right AssetBundle\n\tpublic AudioCueSO musicTrack;\n\n\t/// <summary>\n\t/// Used by the SceneSelector tool to discern what type of scene it needs to load\n\t/// </summary>\n\tpublic enum GameSceneType\n\t{\n\t\t//Playable scenes\n\t\tLocation, //SceneSelector tool will also load PersistentManagers and Gameplay\n\t\tMenu, //SceneSelector tool will also load Gameplay\n\n\t\t//Special scenes\n\t\tInitialisation,\n\t\tPersistentManagers,\n\t\tGameplay,\n\n\t\t//Work in progress scenes that don't need to be played\n\t\tArt,\n\t}\n}\n"}
{"file": "SceneManagement/ScriptableObjects/MenuSO.cs", "language": "unity", "function_name": "CreateAssetMenu", "start_line": 6, "end_line": 7, "comment": "<summary>\n\nThis class contains Settings specific to Menus only\n\n</summary>\n", "code": "[CreateAssetMenu(fileName = \"NewMenu\", menuName = \"Scene Data/Menu\")]\npublic class MenuSO : GameSceneSO { }\n"}
{"file": "Inventory/InventoryManager.cs", "language": "unity", "function_name": "EquipItemEventRaised", "start_line": 107, "end_line": 110, "comment": "This empty function is left here for the possibility of adding decorative 3D items\n", "code": "\tprivate void EquipItemEventRaised(ItemSO item)\n\t{\n\n\t}\n"}
{"file": "Inventory/ScriptableObjects/ItemRecipeSO.cs", "language": "unity", "function_name": "CreateAssetMenu", "start_line": 7, "end_line": 15, "comment": "Created with collaboration from:\n\nhttps://forum.unity.com/threads/inventory-system.980646/\n", "code": "[CreateAssetMenu(fileName = \"ItemRecipe\", menuName = \"Inventory/Recipe\")]\npublic class ItemRecipeSO : ItemSO\n{\n\t[SerializeField] private List<ItemStack> _ingredientsList = new List<ItemStack>();\n\t[SerializeField] private ItemSO _resultingDish = default;\n\n\tpublic override List<ItemStack> IngredientsList => _ingredientsList;\n\tpublic override ItemSO ResultingDish => _resultingDish;\n}\n"}
{"file": "Inventory/ScriptableObjects/ItemSO.cs", "language": "unity", "function_name": "CreateAssetMenu", "start_line": 8, "end_line": 47, "comment": "Created with collaboration from:\n\nhttps://forum.unity.com/threads/inventory-system.980646/\n", "code": "[CreateAssetMenu(fileName = \"Item\", menuName = \"Inventory/Item\")]\npublic class ItemSO : SerializableScriptableObject\n{\n\t[Tooltip(\"The name of the item\")]\n\t[SerializeField] private LocalizedString _name = default;\n\n\t[Tooltip(\"A preview image for the item\")]\n\t[SerializeField]\n\tprivate Sprite _previewImage = default;\n\n\t[Tooltip(\"A description of the item\")]\n\t[SerializeField]\n\tprivate LocalizedString _description = default;\n\n\t[Tooltip(\"A description of the item\")]\n\t[SerializeField]\n\tprivate int _healthResorationValue = default;\n\n\t[Tooltip(\"The type of item\")]\n\t[SerializeField]\n\tprivate ItemTypeSO _itemType = default;\n\n\t[Tooltip(\"A prefab reference for the model of the item\")]\n\t[SerializeField]\n\tprivate GameObject _prefab = default;\n\n\n\tpublic LocalizedString Name => _name;\n\tpublic Sprite PreviewImage => _previewImage;\n\tpublic LocalizedString Description => _description;\n\tpublic int HealthResorationValue => _healthResorationValue;\n\tpublic ItemTypeSO ItemType => _itemType;\n\tpublic GameObject Prefab => _prefab;\n\tpublic virtual List<ItemStack> IngredientsList { get; }\n\tpublic virtual ItemSO ResultingDish { get; }\n\n\tpublic virtual bool IsLocalized { get; }\n\tpublic virtual LocalizedSprite LocalizePreviewImage { get; }\n\n}\n"}
{"file": "Inventory/ScriptableObjects/LocalizedItemSO.cs", "language": "unity", "function_name": "CreateAssetMenu", "start_line": 7, "end_line": 15, "comment": "Created with collaboration from:\n\nhttps://forum.unity.com/threads/inventory-system.980646/\n", "code": "[CreateAssetMenu(fileName = \"LocalizedItem\", menuName = \"Inventory/Localized Item\")]\npublic class LocalizedItemSO : ItemSO\n{\n\t[SerializeField] private bool _isLocalized = false; \n\t[SerializeField] private LocalizedSprite _localizePreviewImage = default;\n\n\tpublic override bool IsLocalized => _isLocalized;\n\tpublic override LocalizedSprite LocalizePreviewImage => _localizePreviewImage;\n}\n"}
{"file": "Inventory/ScriptableObjects/InventorySO.cs", "language": "unity", "function_name": "CreateAssetMenu", "start_line": 7, "end_line": 124, "comment": "Created with collaboration with:\n\nhttps://forum.unity.com/threads/inventory-system.980646/\n", "code": "[CreateAssetMenu(fileName = \"Inventory\", menuName = \"Inventory/Inventory\")]\npublic class InventorySO : ScriptableObject\n{\n\t[Tooltip(\"The collection of items and their quantities.\")]\n\t[SerializeField] private List<ItemStack> _items = new List<ItemStack>();\n\t[SerializeField] private List<ItemStack> _defaultItems = new List<ItemStack>();\n\t\n\tpublic List<ItemStack> Items => _items;\n\n\tpublic void Init()\n\t{\n\t\tif (_items == null)\n\t\t{\n\t\t\t_items = new List<ItemStack>();\n\t\t}\n\t\t_items.Clear();\n\t\tforeach (ItemStack item in _defaultItems)\n\t\t{\n\t\t\t_items.Add(new ItemStack(item));\n\t\t}\n\t}\n\n\tpublic void Add(ItemSO item, int count = 1)\n\t{\n\t\tif (count <= 0)\n\t\t\treturn;\n\n\t\tfor (int i = 0; i < _items.Count; i++)\n\t\t{\n\t\t\tItemStack currentItemStack = _items[i];\n\t\t\tif (item == currentItemStack.Item)\n\t\t\t{\n\t\t\t\t//only add to the amount if the item is usable \n\t\t\t\tif (currentItemStack.Item.ItemType.ActionType == ItemInventoryActionType.Use)\n\t\t\t\t{\n\t\t\t\t\tcurrentItemStack.Amount += count;\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t_items.Add(new ItemStack(item, count));\n\t}\n\n\tpublic void Remove(ItemSO item, int count = 1)\n\t{\n\t\tif (count <= 0)\n\t\t\treturn;\n\n\t\tfor (int i = 0; i < _items.Count; i++)\n\t\t{\n\t\t\tItemStack currentItemStack = _items[i];\n\n\t\t\tif (currentItemStack.Item == item)\n\t\t\t{\n\t\t\t\tcurrentItemStack.Amount -= count;\n\n\t\t\t\tif (currentItemStack.Amount <= 0)\n\t\t\t\t\t_items.Remove(currentItemStack);\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic bool Contains(ItemSO item)\n\t{\n\t\tfor (int i = 0; i < _items.Count; i++)\n\t\t{\n\t\t\tif (item == _items[i].Item)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tpublic int Count(ItemSO item)\n\t{\n\t\tfor (int i = 0; i < _items.Count; i++)\n\t\t{\n\t\t\tItemStack currentItemStack = _items[i];\n\t\t\tif (item == currentItemStack.Item)\n\t\t\t{\n\t\t\t\treturn currentItemStack.Amount;\n\t\t\t}\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\tpublic bool[] IngredientsAvailability(List<ItemStack> ingredients)\n\t{\n\t\tif (ingredients == null)\n\t\t\treturn null;\n\t\tbool[] availabilityArray = new bool[ingredients.Count];\n\n\t\tfor (int i = 0; i < ingredients.Count; i++)\n\t\t{\n\t\t\tavailabilityArray[i] = _items.Exists(o => o.Item == ingredients[i].Item && o.Amount >= ingredients[i].Amount);\n\n\t\t}\n\t\treturn availabilityArray;\n\n\n\t}\n\tpublic bool hasIngredients(List<ItemStack> ingredients)\n\t{\n\n\t\tbool hasIngredients = !ingredients.Exists(j => !_items.Exists(o => o.Item == j.Item && o.Amount >= j.Amount));\n\n\t\treturn hasIngredients;\n\n\n\t}\n}\n"}
{"file": "Menu/MenuSelectionHandler.cs", "language": "unity", "function_name": "SelectDefault", "start_line": 34, "end_line": 40, "comment": "<summary>\n\nHighlights the default element\n\n</summary>\n", "code": "\tprivate IEnumerator SelectDefault()\n\t{\n\t\tyield return new WaitForSeconds(.03f); // Necessary wait otherwise the highlight won't show up\n\n\t\tif (_defaultSelection != null)\n\t\t\tUpdateSelection(_defaultSelection);\n\t}\n"}
{"file": "Menu/MenuSelectionHandler.cs", "language": "unity", "function_name": "UpdateSelection", "start_line": 52, "end_line": 61, "comment": "<summary>\n\nFired by keyboard and gamepad inputs. Current selected UI element will be the ui Element that was selected\n\nwhen the event was fired. The _currentSelection is updated later on, after the EventSystem moves to the\n", "code": "\t/// desired UI element, the UI element will call into UpdateSelection()\n\t/// </summary>\n\tprivate void HandleMoveSelection()\n\t{\n\t\tCursor.visible = false;\n\n\t\t// Handle case where no UI element is selected because mouse left selectable bounds\n\t\tif (EventSystem.current.currentSelectedGameObject == null)\n\t\t\tEventSystem.current.SetSelectedGameObject(_currentSelection);\n\t}\n"}
{"file": "Menu/MenuSelectionHandler.cs", "language": "unity", "function_name": "AllowsSubmit", "start_line": 95, "end_line": 101, "comment": "<summary>\n\nMethod interactable UI elements should call on Submit interaction to determine whether to continue or not.\n\n</summary>\n\n<returns></returns>\n", "code": "\tpublic bool AllowsSubmit()\n\t{\n\t\t// if LMB is not down, there is no edge case to handle, allow the event to continue\n\t\treturn !_inputReader.LeftMouseDown()\n\t\t\t   // if we know mouse & keyboard are on different elements, do not allow interaction to continue\n\t\t\t   || _mouseSelection != null && _mouseSelection == _currentSelection;\n\t}\n"}
{"file": "Menu/MenuSelectionHandler.cs", "language": "unity", "function_name": "UpdateSelection", "start_line": 107, "end_line": 114, "comment": "<summary>\n\nFired by gamepad or keyboard navigation inputs\n\n</summary>\n\n<param name=\"UIElement\"></param>\n", "code": "\tpublic void UpdateSelection(GameObject UIElement)\n\t{\n\t\tif ((UIElement.GetComponent<MultiInputSelectableElement>() != null) || (UIElement.GetComponent<MultiInputButton>() != null))\n\t\t{\n\t\t\t_mouseSelection = UIElement;\n\t\t\t_currentSelection = UIElement;\n\t\t}\n\t}\n"}
{"file": "Menu/MenuSelectionHandler.cs", "language": "unity", "function_name": "OnGUI", "start_line": 117, "end_line": 121, "comment": "Debug\n", "code": "\t// private void OnGUI()\n\t// {\n\t//\t \tGUILayout.Box($\"_currentSelection: {(_currentSelection != null ? _currentSelection.name : \"null\")}\");\n\t//\t \tGUILayout.Box($\"_mouseSelection: {(_mouseSelection != null ? _mouseSelection.name : \"null\")}\");\n\t// }\n"}
{"file": "Menu/MenuSelectionHandler.cs", "language": "unity", "function_name": "Update", "start_line": 122, "end_line": 129, "comment": "Debug\n\nprivate void OnGUI()\n\n{\n\nGUILayout.Box($\"_currentSelection: {(_currentSelection != null ? _currentSelection.name : \"null\")}\");\n\nGUILayout.Box($\"_mouseSelection: {(_mouseSelection != null ? _mouseSelection.name : \"null\")}\");\n\n}\n", "code": "\tprivate void Update()\n\t{\n\t\tif ((EventSystem.current != null) && (EventSystem.current.currentSelectedGameObject == null) && (_currentSelection != null))\n\t\t{\n\n\t\t\tEventSystem.current.SetSelectedGameObject(_currentSelection);\n\t\t}\n\t}\n"}
{"file": "Menu/MultiInputButton.cs", "language": "unity", "function_name": "AddComponentMenu", "start_line": 8, "end_line": 50, "comment": "<summary>\n\nAn extension of Unity's base Button class, to support input from both mouse and keyboard/joypad\n\n</summary>\n", "code": "[AddComponentMenu(\"UOP1/UI/MultiInputButton\")]\npublic class MultiInputButton : Button\n{\n\t[ReadOnly] public bool IsSelected;\n\n\tprivate MenuSelectionHandler _menuSelectionHandler;\n\n\tprivate new void Awake()\n\t{\n\t\t_menuSelectionHandler = transform.root.gameObject.GetComponentInChildren<MenuSelectionHandler>();\n\t}\n\n\tpublic override void OnPointerEnter(PointerEventData eventData)\n\t{\n\t\t_menuSelectionHandler.HandleMouseEnter(gameObject);\n\t}\n\n\tpublic override void OnPointerExit(PointerEventData eventData)\n\t{\n\t\t_menuSelectionHandler.HandleMouseExit(gameObject);\n\t}\n\n\tpublic override void OnSelect(BaseEventData eventData)\n\t{\n\t\tIsSelected = true;\n\t\t_menuSelectionHandler.UpdateSelection(gameObject);\n\t\tbase.OnSelect(eventData);\n\t}\n\n\tpublic void UpdateSelected()\n\t{\n\t\tif (_menuSelectionHandler == null)\n\t\t\t_menuSelectionHandler = transform.root.gameObject.GetComponentInChildren<MenuSelectionHandler>();\n\t\t\n\t\t_menuSelectionHandler.UpdateSelection(gameObject);\n\t}\n\n\tpublic override void OnSubmit(BaseEventData eventData)\n\t{\n\t\tif (_menuSelectionHandler.AllowsSubmit())\n\t\t\tbase.OnSubmit(eventData);\n\t}\n}\n"}
{"file": "Events/ScriptableObjects/FloatEventChannelSO.cs", "language": "unity", "function_name": "CreateAssetMenu", "start_line": 8, "end_line": 18, "comment": "<summary>\n\nThis class is used for Events that have one int argument.\n\nExample: An Achievement unlock event, where the int is the Achievement ID.\n\n</summary>\n", "code": "[CreateAssetMenu(menuName = \"Events/Float Event Channel\")]\npublic class FloatEventChannelSO : DescriptionBaseSO\n{\n\tpublic UnityAction<float> OnEventRaised;\n\t\n\tpublic void RaiseEvent(float value)\n\t{\n\t\tif (OnEventRaised != null)\n\t\t\tOnEventRaised.Invoke(value);\n\t}\n}\n"}
{"file": "Events/ScriptableObjects/DialogueActorChannelSO.cs", "language": "unity", "function_name": "CreateAssetMenu", "start_line": 9, "end_line": 19, "comment": "<summary>\n\nThis class is used for talk interaction events.\n\nExample: start talking to an actor passed as paramater\n\n</summary>\n", "code": "[CreateAssetMenu(menuName = \"Events/Dialogue Actor Channel\")]\npublic class DialogueActorChannelSO : DescriptionBaseSO\n{\n\tpublic UnityAction<ActorSO> OnEventRaised;\n\t\n\tpublic void RaiseEvent(ActorSO actor)\n\t{\n\t\tif (OnEventRaised != null)\n\t\t\tOnEventRaised.Invoke(actor);\n\t}\n}\n"}
{"file": "Events/ScriptableObjects/VoidEventChannelSO.cs", "language": "unity", "function_name": "arguments", "start_line": 5, "end_line": 18, "comment": "<summary>\n", "code": "/// This class is used for Events that have no arguments (Example: Exit game event)\n/// </summary>\n\n[CreateAssetMenu(menuName = \"Events/Void Event Channel\")]\npublic class VoidEventChannelSO : DescriptionBaseSO\n{\n\tpublic UnityAction OnEventRaised;\n\n\tpublic void RaiseEvent()\n\t{\n\t\tif (OnEventRaised != null)\n\t\t\tOnEventRaised.Invoke();\n\t}\n}\n"}
{"file": "Events/ScriptableObjects/AudioCueEventChannelSO.cs", "language": "unity", "function_name": "CreateAssetMenu", "start_line": 6, "end_line": 66, "comment": "<summary>\n\nEvent on which <c>AudioCue</c> components send a message to play SFX and music. <c>AudioManager</c> listens on these events, and actually plays the sound.\n\n</summary>\n", "code": "[CreateAssetMenu(menuName = \"Events/AudioCue Event Channel\")]\npublic class AudioCueEventChannelSO : DescriptionBaseSO\n{\n\tpublic AudioCuePlayAction OnAudioCuePlayRequested;\n\tpublic AudioCueStopAction OnAudioCueStopRequested;\n\tpublic AudioCueFinishAction OnAudioCueFinishRequested;\n\n\tpublic AudioCueKey RaisePlayEvent(AudioCueSO audioCue, AudioConfigurationSO audioConfiguration, Vector3 positionInSpace = default)\n\t{\n\t\tAudioCueKey audioCueKey = AudioCueKey.Invalid;\n\n\t\tif (OnAudioCuePlayRequested != null)\n\t\t{\n\t\t\taudioCueKey = OnAudioCuePlayRequested.Invoke(audioCue, audioConfiguration, positionInSpace);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDebug.LogWarning(\"An AudioCue play event was requested  for \" + audioCue.name +\", but nobody picked it up. \" +\n\t\t\t\t\"Check why there is no AudioManager already loaded, \" +\n\t\t\t\t\"and make sure it's listening on this AudioCue Event channel.\");\n\t\t}\n\n\t\treturn audioCueKey;\n\t}\n\n\tpublic bool RaiseStopEvent(AudioCueKey audioCueKey)\n\t{\n\t\tbool requestSucceed = false;\n\n\t\tif (OnAudioCueStopRequested != null)\n\t\t{\n\t\t\trequestSucceed = OnAudioCueStopRequested.Invoke(audioCueKey);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDebug.LogWarning(\"An AudioCue stop event was requested, but nobody picked it up. \" +\n\t\t\t\t\"Check why there is no AudioManager already loaded, \" +\n\t\t\t\t\"and make sure it's listening on this AudioCue Event channel.\");\n\t\t}\n\n\t\treturn requestSucceed;\n\t}\n\n\tpublic bool RaiseFinishEvent(AudioCueKey audioCueKey)\n\t{\n\t\tbool requestSucceed = false;\n\n\t\tif (OnAudioCueStopRequested != null)\n\t\t{\n\t\t\trequestSucceed = OnAudioCueFinishRequested.Invoke(audioCueKey);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDebug.LogWarning(\"An AudioCue finish event was requested, but nobody picked it up. \" +\n\t\t\t\t\"Check why there is no AudioManager already loaded, \" +\n\t\t\t\t\"and make sure it's listening on this AudioCue Event channel.\");\n\t\t}\n\n\t\treturn requestSucceed;\n\t}\n}\n"}
{"file": "Events/ScriptableObjects/InteractionUIEventChannelSO.cs", "language": "unity", "function_name": "CreateAssetMenu", "start_line": 9, "end_line": 19, "comment": "<summary>\n\nThis class is used for Events to toggle the interaction UI.\n\nExample: Dispaly or hide the interaction UI via a bool and the interaction type from the enum via int\n\n</summary>\n", "code": "[CreateAssetMenu(menuName = \"Events/Toogle Interaction UI Event Channel\")]\npublic class InteractionUIEventChannelSO : DescriptionBaseSO\n{\n\tpublic UnityAction<bool, InteractionType> OnEventRaised;\n\n\tpublic void RaiseEvent(bool state, InteractionType interactionType)\n\t{\n\t\tif (OnEventRaised != null)\n\t\t\tOnEventRaised.Invoke(state, interactionType);\n\t}\n}\n"}
{"file": "Events/ScriptableObjects/ItemStackEventChannelSO.cs", "language": "unity", "function_name": "CreateAssetMenu", "start_line": 9, "end_line": 19, "comment": "<summary>\n\nThis class is used for Item interaction events.\n\nExample: Pick up an item passed as paramater\n\n</summary>\n", "code": "[CreateAssetMenu(menuName = \"Events/UI/Item stack Event Channel\")]\npublic class ItemStackEventChannelSO : DescriptionBaseSO\n{\n\tpublic UnityAction<ItemStack> OnEventRaised;\n\t\n\tpublic void RaiseEvent(ItemStack item)\n\t{\n\t\tif (OnEventRaised != null)\n\t\t\tOnEventRaised.Invoke(item);\n\t}\n}\n"}
{"file": "Events/ScriptableObjects/ItemEventChannelSO.cs", "language": "unity", "function_name": "CreateAssetMenu", "start_line": 9, "end_line": 19, "comment": "<summary>\n\nThis class is used for Item interaction events.\n\nExample: Pick up an item passed as paramater\n\n</summary>\n", "code": "[CreateAssetMenu(menuName = \"Events/UI/Item Event Channel\")]\npublic class ItemEventChannelSO : DescriptionBaseSO\n{\n\tpublic UnityAction<ItemSO> OnEventRaised;\n\t\n\tpublic void RaiseEvent(ItemSO item)\n\t{\n\t\tif (OnEventRaised != null)\n\t\t\tOnEventRaised.Invoke(item);\n\t}\n}\n"}
{"file": "Events/ScriptableObjects/IntEventChannelSO.cs", "language": "unity", "function_name": "CreateAssetMenu", "start_line": 9, "end_line": 19, "comment": "<summary>\n\nThis class is used for Events that have one int argument.\n\nExample: An Achievement unlock event, where the int is the Achievement ID.\n\n</summary>\n", "code": "[CreateAssetMenu(menuName = \"Events/Int Event Channel\")]\npublic class IntEventChannelSO : DescriptionBaseSO\n{\n\tpublic UnityAction<int> OnEventRaised;\n\t\n\tpublic void RaiseEvent(int value)\n\t{\n\t\tif (OnEventRaised != null)\n\t\t\tOnEventRaised.Invoke(value);\n\t}\n}\n"}
{"file": "Events/ScriptableObjects/TransformEventChannelSO.cs", "language": "unity", "function_name": "CreateAssetMenu", "start_line": 9, "end_line": 19, "comment": "<summary>\n\nThis class is used for Events that have one transform argument.\n\nExample: Spawn system initializes player and fire event, where the transform is the position of player.\n\n</summary>\n", "code": "[CreateAssetMenu(menuName = \"Events/Transform Event Channel\")]\npublic class TransformEventChannelSO : DescriptionBaseSO\n{\n\tpublic UnityAction<Transform> OnEventRaised;\n\n\tpublic void RaiseEvent(Transform value)\n\t{\n\t\tif (OnEventRaised != null)\n\t\t\tOnEventRaised.Invoke(value);\n\t}\n}\n"}
{"file": "Events/ScriptableObjects/NPCMovementEventChannelSO.cs", "language": "unity", "function_name": "CreateAssetMenu", "start_line": 7, "end_line": 17, "comment": "<summary>\n\nThis class is used for Events that have one NPCMovementConfigSO argument.\n\n</summary>\n", "code": "[CreateAssetMenu(menuName = \"Events/NPC Movement Event Channel\")]\npublic class NPCMovementEventChannelSO : DescriptionBaseSO\n{\n\tpublic UnityAction<NPCMovementConfigSO> OnEventRaised;\n\n\tpublic void RaiseEvent(NPCMovementConfigSO value)\n\t{\n\t\tif (OnEventRaised != null)\n\t\t\tOnEventRaised.Invoke(value);\n\t}\n}\n"}
{"file": "Events/ScriptableObjects/GameObjectEventChannelSO.cs", "language": "unity", "function_name": "CreateAssetMenu", "start_line": 9, "end_line": 19, "comment": "<summary>\n\nThis class is used for Events that have one gameobject argument.\n\nExample: A game object pick up event event, where the GameObject is the object we are interacting with.\n\n</summary>\n", "code": "[CreateAssetMenu(menuName = \"Events/GameObject Event Channel\")]\npublic class GameObjectEventChannelSO : DescriptionBaseSO\n{\n\tpublic UnityAction<GameObject> OnEventRaised;\n\t\n\tpublic void RaiseEvent(GameObject value)\n\t{\n\t\tif (OnEventRaised != null)\n\t\t\tOnEventRaised.Invoke(value);\n\t}\n}\n"}
{"file": "Events/ScriptableObjects/LoadEventChannelSO.cs", "language": "unity", "function_name": "CreateAssetMenu", "start_line": 8, "end_line": 26, "comment": "<summary>\n\nThis class is used for scene-loading events.\n\nTakes a GameSceneSO of the location or menu that needs to be loaded, and a bool to specify if a loading screen needs to display.\n\n</summary>\n", "code": "[CreateAssetMenu(menuName = \"Events/Load Event Channel\")]\npublic class LoadEventChannelSO : DescriptionBaseSO\n{\n\tpublic UnityAction<GameSceneSO, bool, bool> OnLoadingRequested;\n\n\tpublic void RaiseEvent(GameSceneSO locationToLoad, bool showLoadingScreen = false, bool fadeScreen = false)\n\t{\n\t\tif (OnLoadingRequested != null)\n\t\t{\n\t\t\tOnLoadingRequested.Invoke(locationToLoad, showLoadingScreen, fadeScreen);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDebug.LogWarning(\"A Scene loading was requested, but nobody picked it up. \" +\n\t\t\t\t\"Check why there is no SceneLoader already present, \" +\n\t\t\t\t\"and make sure it's listening on this Load Event channel.\");\n\t\t}\n\t}\n}\n"}
{"file": "Events/ScriptableObjects/BoolEventChannelSO.cs", "language": "unity", "function_name": "CreateAssetMenu", "start_line": 9, "end_line": 19, "comment": "<summary>\n\nThis class is used for Events that have a bool argument.\n\nExample: An event to toggle a UI interface\n\n</summary>\n", "code": "[CreateAssetMenu(menuName = \"Events/Bool Event Channel\")]\npublic class BoolEventChannelSO : DescriptionBaseSO\n{\n\tpublic event UnityAction<bool> OnEventRaised;\n\n\tpublic void RaiseEvent(bool value)\n\t{\n\t\tif (OnEventRaised != null)\n\t\t\tOnEventRaised.Invoke(value);\n\t}\n}\n"}
{"file": "Events/ScriptableObjects/DialogueDataChannelSO.cs", "language": "unity", "function_name": "CreateAssetMenu", "start_line": 9, "end_line": 19, "comment": "<summary>\n\nThis class is used for talk interaction events.\n\nExample: start talking to an actor passed as paramater\n\n</summary>\n", "code": "[CreateAssetMenu(menuName = \"Events/Dialogue Data Channel\")]\npublic class DialogueDataChannelSO : DescriptionBaseSO\n{\n\tpublic UnityAction<DialogueDataSO> OnEventRaised;\n\t\n\tpublic void RaiseEvent(DialogueDataSO dialogue)\n\t{\n\t\tif (OnEventRaised != null)\n\t\t\tOnEventRaised.Invoke(dialogue);\n\t}\n}\n"}
{"file": "Characters/Damageable.cs", "language": "unity", "function_name": "Revive", "start_line": 94, "end_line": 102, "comment": "<summary>\n\nCalled by the StateMachine action ResetHealthSO. Used to revive the Rock critters.\n\n</summary>\n", "code": "\tpublic void Revive()\n\t{\n\t\t_currentHealthSO.SetCurrentHealth(_healthConfigSO.InitialHealth);\n\t\t\n\t\tif (_updateHealthUI != null)\n\t\t\t_updateHealthUI.RaiseEvent();\n\t\t\t\n\t\tIsDead = false;\n\t}\n"}
{"file": "Characters/Damageable.cs", "language": "unity", "function_name": "Cure", "start_line": 107, "end_line": 116, "comment": "<summary>\n\nUsed for cure events, like eating food. Triggered by an IntEventChannelSO.\n\n</summary>\n", "code": "\tprivate void Cure(int healthToAdd)\n\t{\n\t\tif (IsDead)\n\t\t\treturn;\n\t\t\t\n\t\t_currentHealthSO.RestoreHealth(healthToAdd);\n\n\t\tif (_updateHealthUI != null)\n\t\t\t_updateHealthUI.RaiseEvent();\n\t}\n"}
{"file": "Characters/ZoneTriggerController.cs", "language": "unity", "function_name": "type", "start_line": 8, "end_line": 31, "comment": "<summary>\n", "code": "/// A generic class for a \"zone\", that is a trigger collider that can detect if an object of a certain type (layer) entered or exited it.\n/// Implements <code>OnTriggerEnter</code> and <code>OnTriggerExit</code> so it needs to be on the same object that holds the Collider.\n/// </summary>\npublic class ZoneTriggerController : MonoBehaviour\n{\n\t[SerializeField] private BoolEvent _enterZone = default;\n\t[SerializeField] private LayerMask _layers = default;\n\n\tprivate void OnTriggerEnter(Collider other)\n\t{\n\t\tif ((1 << other.gameObject.layer & _layers) != 0)\n\t\t{\n\t\t\t_enterZone.Invoke(true, other.gameObject);\n\t\t}\n\t}\n\n\tprivate void OnTriggerExit(Collider other)\n\t{\n\t\tif ((1 << other.gameObject.layer & _layers) != 0)\n\t\t{\n\t\t\t_enterZone.Invoke(false, other.gameObject);\n\t\t}\n\t}\n}\n"}
{"file": "Characters/Protagonist.cs", "language": "unity", "function_name": "OnEnable", "start_line": 37, "end_line": 46, "comment": "Adds listeners for events being triggered in the InputReader script\n", "code": "\tprivate void OnEnable()\n\t{\n\t\t_inputReader.JumpEvent += OnJumpInitiated;\n\t\t_inputReader.JumpCanceledEvent += OnJumpCanceled;\n\t\t_inputReader.MoveEvent += OnMove;\n\t\t_inputReader.StartedRunning += OnStartedRunning;\n\t\t_inputReader.StoppedRunning += OnStoppedRunning;\n\t\t_inputReader.AttackEvent += OnStartedAttack;\n\t\t//...\n\t}\n"}
{"file": "Characters/Protagonist.cs", "language": "unity", "function_name": "OnDisable", "start_line": 49, "end_line": 58, "comment": "Removes all listeners to the events coming from the InputReader script\n", "code": "\tprivate void OnDisable()\n\t{\n\t\t_inputReader.JumpEvent -= OnJumpInitiated;\n\t\t_inputReader.JumpCanceledEvent -= OnJumpCanceled;\n\t\t_inputReader.MoveEvent -= OnMove;\n\t\t_inputReader.StartedRunning -= OnStartedRunning;\n\t\t_inputReader.StoppedRunning -= OnStoppedRunning;\n\t\t_inputReader.AttackEvent -= OnStartedAttack;\n\t\t//...\n\t}\n"}
{"file": "Characters/Protagonist.cs", "language": "unity", "function_name": "OnMove", "start_line": 114, "end_line": 118, "comment": "---- EVENT LISTENERS ----\n", "code": "\tprivate void OnMove(Vector2 movement)\n\t{\n\n\t\t_inputVector = movement;\n\t}\n"}
{"file": "Characters/MovingCritterAttackController.cs", "language": "unity", "function_name": "SetAttackTarget", "start_line": 13, "end_line": 16, "comment": "When the attack starts, the position targeted by the attack is determined and is not changed afterward\n", "code": "\tpublic void SetAttackTarget()\n\t{\n\t\t_propelTargetVector = (_playerTransform.Value.position - transform.position) * _propelFactor / _propelDuration;\n\t}\n"}
{"file": "Characters/MovingCritterAttackController.cs", "language": "unity", "function_name": "AttackPropelTrigger", "start_line": 19, "end_line": 22, "comment": "Trigger the propel movement during the attack\n", "code": "\tpublic void AttackPropelTrigger()\n\t{\n\t\t_innerTime = _propelDuration;\n\t}\n"}
{"file": "Characters/HealthSO.cs", "language": "unity", "function_name": "CreateAssetMenu", "start_line": 7, "end_line": 38, "comment": "<summary>\n\nAn instance of the health of a character, be it the player or an NPC.\n\nThe initial values are usually contained in another SO of type HealthConfigSO.\n\n</summary>\n", "code": "[CreateAssetMenu(fileName = \"PlayersHealth\", menuName = \"EntityConfig/Player's Health\")]\npublic class HealthSO : ScriptableObject\n{\n\t[Tooltip(\"The initial health\")]\n\t[SerializeField][ReadOnly] private int _maxHealth;\n\t[SerializeField][ReadOnly] private int _currentHealth;\n\n\tpublic int MaxHealth => _maxHealth;\n\tpublic int CurrentHealth => _currentHealth;\n\n\tpublic void SetMaxHealth(int newValue)\n\t{\n\t\t_maxHealth = newValue;\n\t}\n\n\tpublic void SetCurrentHealth(int newValue)\n\t{\n\t\t_currentHealth = newValue;\n\t}\n\t\n\tpublic void InflictDamage(int DamageValue)\n\t{\n\t\t_currentHealth -= DamageValue;\n\t}\n\n\tpublic void RestoreHealth(int HealthValue)\n\t{\n\t\t_currentHealth += HealthValue;\n\t\tif(_currentHealth > _maxHealth)\n\t\t\t_currentHealth = _maxHealth;\n\t}\n}\n"}
{"file": "Characters/StateMachine/Actions/AnimatorParameterActionSO.cs", "language": "unity", "function_name": "state", "start_line": 8, "end_line": 28, "comment": "<summary>\n", "code": "/// Flexible StateActionSO for the StateMachine which allows to set any parameter on the Animator, in any moment of the state (OnStateEnter, OnStateExit, or each OnUpdate).\n/// </summary>\n[CreateAssetMenu(fileName = \"AnimatorParameterAction\", menuName = \"State Machines/Actions/Set Animator Parameter\")]\npublic class AnimatorParameterActionSO : StateActionSO\n{\n\tpublic ParameterType parameterType = default;\n\tpublic string parameterName = default;\n\n\tpublic bool boolValue = default;\n\tpublic int intValue = default;\n\tpublic float floatValue = default;\n\n\tpublic Moment whenToRun = default; // Allows this StateActionSO type to be reused for all 3 state moments\n\n\tprotected override StateAction CreateAction() => new AnimatorParameterAction(Animator.StringToHash(parameterName));\n\n\tpublic enum ParameterType\n\t{\n\t\tBool, Int, Float, Trigger,\n\t}\n}\n"}
{"file": "Characters/StateMachine/Actions/AerialMovementActionSO.cs", "language": "unity", "function_name": "CreateAssetMenu", "start_line": 8, "end_line": 20, "comment": "<summary>\n\nThis Action handles horizontal movement while in the air, keeping momentum, simulating air resistance, and accelerating towards the desired speed.\n\n</summary>\n", "code": "[CreateAssetMenu(fileName = \"AerialMovement\", menuName = \"State Machines/Actions/Aerial Movement\")]\npublic class AerialMovementActionSO : StateActionSO\n{\n\tpublic float Speed => _speed;\n\tpublic float Acceleration => _acceleration;\n\n\t[Tooltip(\"Desired horizontal movement speed while in the air\")]\n\t[SerializeField] [Range(0.1f, 100f)] private float _speed = 10f;\n\t[Tooltip(\"The acceleration applied to reach the desired speed\")]\n\t[SerializeField] [Range(0.1f, 100f)] private float _acceleration = 20f;\n\n\tprotected override StateAction CreateAction() => new AerialMovementAction();\n}\n"}
{"file": "Characters/StateMachine/Actions/AnimatorMoveSpeedActionSO.cs", "language": "unity", "function_name": "state", "start_line": 8, "end_line": 16, "comment": "<summary>\n", "code": "/// Flexible StateActionSO for the StateMachine which allows to set any parameter on the Animator, in any moment of the state (OnStateEnter, OnStateExit, or each OnUpdate).\n/// </summary>\n[CreateAssetMenu(fileName = \"AnimatorMoveSpeedAction\", menuName = \"State Machines/Actions/Set Animator Move Speed\")]\npublic class AnimatorMoveSpeedActionSO : StateActionSO\n{\n\tpublic string parameterName = default;\n\n\tprotected override StateAction CreateAction() => new AnimatorMoveSpeedAction(Animator.StringToHash(parameterName));\n}\n"}
{"file": "Characters/StateMachine/Actions/StopMovementActionSO.cs", "language": "unity", "function_name": "CreateAssetMenu", "start_line": 8, "end_line": 15, "comment": "<summary>\n\nAn Action to clear a <see cref=\"Protagonist.movementVector\"/> at the <see cref=\"StateAction.SpecificMoment\"/> <see cref=\"StopMovementActionSO.Moment\"/>\n\n</summary>\n", "code": "[CreateAssetMenu(fileName = \"StopMovementAction\", menuName = \"State Machines/Actions/Stop Movement\")]\npublic class StopMovementActionSO : StateActionSO\n{\n\t[SerializeField] private StateAction.SpecificMoment _moment = default;\n\tpublic StateAction.SpecificMoment Moment => _moment;\n\n\tprotected override StateAction CreateAction() => new StopMovement();\n}\n"}
{"file": "Characters/StateMachine/Actions/PlayLiftoffJumpParticlesActionSO.cs", "language": "unity", "function_name": "CreateAssetMenu", "start_line": 7, "end_line": 8, "comment": "TODO: Cleanup all the Actions related to jump particles, there are too many specific scripts now\n", "code": "[CreateAssetMenu(fileName = \"PlayLiftoffJumpParticlesAction\", menuName = \"State Machines/Actions/Play Liftoff Jump Particles Action\")]\npublic class PlayLiftoffJumpParticlesActionSO : StateActionSO<PlayLiftoffJumpParticlesAction> { }\n"}
{"file": "Characters/StateMachine/Actions/ChangeGameStateActionSO.cs", "language": "unity", "function_name": "CreateAssetMenu", "start_line": 9, "end_line": 17, "comment": "<summary>\n\nThis Action handles updating the game state.\n\n</summary>\n", "code": "[CreateAssetMenu(fileName = \"ChangeGameState\", menuName = \"State Machines/Actions/Change GameState\")]\npublic class ChangeGameStateActionSO : StateActionSO\n{\n\t[SerializeField] GameState _newGameState = default;\n\t[SerializeField] Moment _whenToRun = default;\n\t[SerializeField] private GameStateSO _gameState = default;\n\t\n\tprotected override StateAction CreateAction() => new ChangeGameStateAction(_newGameState, _gameState, _whenToRun);\n}\n"}
{"file": "Characters/StateMachine/Actions/MovementActions/RoamingMovementAction.cs", "language": "unity", "function_name": "GetRoamingPositionAroundPosition", "start_line": 54, "end_line": 57, "comment": "Compute a random target position around the starting position.\n", "code": "\tprivate Vector3 GetRoamingPositionAroundPosition(Vector3 position)\n\t{\n\t\treturn position + new Vector3(Random.Range(-1, 1), 0.0f, Random.Range(-1, 1)).normalized * Random.Range(_roamingDistance / 2, _roamingDistance);\n\t}\n"}
{"file": "Systems/Settings/SettingsSystem.cs", "language": "unity", "function_name": "SetCurrentSettings", "start_line": 35, "end_line": 48, "comment": "<summary>\n\nSet current settings \n\n</summary>\n", "code": "\tvoid SetCurrentSettings()\n\t{\n\t\t_changeMusicVolumeEventChannel.RaiseEvent(_currentSettings.MusicVolume);//raise event for volume change\n\t\t_changeSFXVolumeEventChannel.RaiseEvent(_currentSettings.SfxVolume); //raise event for volume change\n\t\t_changeMasterVolumeEventChannel.RaiseEvent(_currentSettings.MasterVolume); //raise event for volume change\n\t\tResolution currentResolution = Screen.currentResolution; // get a default resolution in case saved resolution doesn't exist in the resolution List\n\t\tif (_currentSettings.ResolutionsIndex < Screen.resolutions.Length)\n\t\t\tcurrentResolution = Screen.resolutions[_currentSettings.ResolutionsIndex];\n\t\tScreen.SetResolution(currentResolution.width, currentResolution.height, _currentSettings.IsFullscreen);\n\t\t_urpAsset.shadowDistance = _currentSettings.ShadowDistance;\n\t\t_urpAsset.msaaSampleCount = _currentSettings.AntiAliasingIndex;\n\n\t\tLocalizationSettings.SelectedLocale = _currentSettings.CurrentLocale;\n\t}\n"}
{"file": "Pool/PoolSO.cs", "language": "unity", "function_name": "Prewarm", "start_line": 30, "end_line": 42, "comment": "<summary>\n\nPrewarms the pool with a <paramref name=\"num\"/> of <typeparamref name=\"T\"/>.\n\n</summary>\n\n<param name=\"num\">The number of members to create as a part of this pool.</param>\n\n<remarks>NOTE: This method can be called at any time, but only once for the lifetime of the pool.</remarks>\n", "code": "\t\tpublic virtual void Prewarm(int num)\n\t\t{\n\t\t\tif (HasBeenPrewarmed)\n\t\t\t{\n\t\t\t\tDebug.LogWarning($\"Pool {name} has already been prewarmed.\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfor (int i = 0; i < num; i++)\n\t\t\t{\n\t\t\t\tAvailable.Push(Create());\n\t\t\t}\n\t\t\tHasBeenPrewarmed = true;\n\t\t}\n"}
{"file": "Pool/PoolSO.cs", "language": "unity", "function_name": "Request", "start_line": 48, "end_line": 51, "comment": "<summary>\n\nRequests a <typeparamref name=\"T\"/> from this pool.\n\n</summary>\n\n<returns>The requested <typeparamref name=\"T\"/>.</returns>\n", "code": "\t\tpublic virtual T Request()\n\t\t{\n\t\t\treturn Available.Count > 0 ? Available.Pop() : Create();\n\t\t}\n"}
{"file": "Pool/PoolSO.cs", "language": "unity", "function_name": "Request", "start_line": 57, "end_line": 65, "comment": "<summary>\n\nBatch requests a <typeparamref name=\"T\"/> collection from this pool.\n\n</summary>\n\n<returns>A <typeparamref name=\"T\"/> collection.</returns>\n", "code": "\t\tpublic virtual IEnumerable<T> Request(int num = 1)\n\t\t{\n\t\t\tList<T> members = new List<T>(num);\n\t\t\tfor (int i = 0; i < num; i++)\n\t\t\t{\n\t\t\t\tmembers.Add(Request());\n\t\t\t}\n\t\t\treturn members;\n\t\t}\n"}
{"file": "Pool/PoolSO.cs", "language": "unity", "function_name": "Return", "start_line": 71, "end_line": 74, "comment": "<summary>\n\nReturns a <typeparamref name=\"T\"/> to the pool.\n\n</summary>\n\n<param name=\"member\">The <typeparamref name=\"T\"/> to return.</param>\n", "code": "\t\tpublic virtual void Return(T member)\n\t\t{\n\t\t\tAvailable.Push(member);\n\t\t}\n"}
{"file": "Pool/PoolSO.cs", "language": "unity", "function_name": "Return", "start_line": 80, "end_line": 86, "comment": "<summary>\n\nReturns a <typeparamref name=\"T\"/> collection to the pool.\n\n</summary>\n\n<param name=\"members\">The <typeparamref name=\"T\"/> collection to return.</param>\n", "code": "\t\tpublic virtual void Return(IEnumerable<T> members)\n\t\t{\n\t\t\tforeach (T member in members)\n\t\t\t{\n\t\t\t\tReturn(member);\n\t\t\t}\n\t\t}\n"}
{"file": "Pool/ComponentPoolSO.cs", "language": "unity", "function_name": "SetParent", "start_line": 33, "end_line": 37, "comment": "<summary>\n\nParents the pool root transform to <paramref name=\"t\"/>.\n\n</summary>\n\n<param name=\"t\">The Transform to which this pool should become a child.</param>\n\n<remarks>NOTE: Setting the parent to an object marked DontDestroyOnLoad will effectively make this pool DontDestroyOnLoad.<br/>\n\nThis can only be circumvented by manually destroying the object or its parent or by setting the parent to an object not marked DontDestroyOnLoad.</remarks>\n", "code": "\t\tpublic void SetParent(Transform t)\n\t\t{\n\t\t\t_parent = t;\n\t\t\tPoolRoot.SetParent(_parent);\n\t\t}\n"}
{"file": "Interaction/InteractionManager.cs", "language": "unity", "function_name": "Header", "start_line": 12, "end_line": 31, "comment": "Events for the different interaction types\n", "code": "\t[Header(\"Broadcasting on\")]\n\t[SerializeField] private ItemEventChannelSO _onObjectPickUp = default;\n\t[SerializeField] private VoidEventChannelSO _onCookingStart = default;\n\t[SerializeField] private DialogueActorChannelSO _startTalking = default;\n\t[SerializeField] private InteractionUIEventChannelSO _toggleInteractionUI = default;\n\n\t[Header(\"Listening to\")]\n\t[SerializeField] private VoidEventChannelSO _onInteractionEnded = default;\n\t[SerializeField] private PlayableDirectorChannelSO _onCutsceneStart = default;\n\t\n\t[ReadOnly] public InteractionType currentInteractionType; //This is checked/consumed by conditions in the StateMachine\n\n\tprivate LinkedList<Interaction> _potentialInteractions = new LinkedList<Interaction>(); //To store the objects we the player could potentially interact with\n\n\tprivate void OnEnable()\n\t{\n\t\t_inputReader.InteractEvent += OnInteractionButtonPress;\n\t\t_onInteractionEnded.OnEventRaised += OnInteractionEnd;\n\t\t_onCutsceneStart.OnEventRaised += ResetPotentialInteractions;\n\t}\n"}
{"file": "Interaction/InteractionManager.cs", "language": "unity", "function_name": "Collect", "start_line": 41, "end_line": 55, "comment": "Called mid-way through the AnimationClip of collecting\n", "code": "\tprivate void Collect()\n\t{\n\t\tGameObject itemObject = _potentialInteractions.First.Value.interactableObject;\n\t\t_potentialInteractions.RemoveFirst();\n\n\t\tif (_onObjectPickUp != null)\n\t\t{\n\t\t\tItemSO currentItem = itemObject.GetComponent<CollectableItem>().GetItem();\n\t\t\t_onObjectPickUp.RaiseEvent(currentItem);\n\t\t}\n\n\t\tDestroy(itemObject); //TODO: maybe move this destruction in a more general manger, to implement a removal SFX\n\n\t\tRequestUpdateUI(false);\n\t}\n"}
{"file": "Interaction/InteractionManager.cs", "language": "unity", "function_name": "OnTriggerChangeDetected", "start_line": 88, "end_line": 94, "comment": "Called by the Event on the trigger collider on the child GO called \"InteractionDetector\"\n", "code": "\tpublic void OnTriggerChangeDetected(bool entered, GameObject obj)\n\t{\n\t\tif (entered)\n\t\t\tAddPotentialInteraction(obj);\n\t\telse\n\t\t\tRemovePotentialInteraction(obj);\n\t}\n"}
{"file": "Localization/Editor/LocalizeTMProFontEvent.cs", "language": "unity", "function_name": "AddComponentMenu", "start_line": 11, "end_line": 37, "comment": "<summary>\n\nComponent that can be used to Localize a TMP_FontAsset asset.\n\n</summary>\n", "code": "\t[AddComponentMenu(\"Localization/Asset/Localize TMPro Font Event\")]\n\tpublic class LocalizeTMProFontEvent : LocalizedAssetEvent<TMP_FontAsset, LocalizedTMProFont, UnityEventFont>\n\t{\n\t\tprivate void Reset()\n\t\t{\n\t\t\t//Set up Unity Event automatically\n\t\t\tvar target = GetComponent<TextMeshProUGUI>();\n\t\t\tvar setFontMethod = target.GetType().GetProperty(\"font\").GetSetMethod();\n\t\t\tvar methodDelegate = System.Delegate.CreateDelegate(typeof(UnityAction<TMP_FontAsset>), target, setFontMethod) as UnityAction<TMP_FontAsset>;\n\t\t\tUnityEditor.Events.UnityEventTools.AddPersistentListener(this.OnUpdateAsset, methodDelegate);\n\n\t\t\t//Set up font localize asset table automatically\n\t\t\tvar collections = LocalizationEditorSettings.GetAssetTableCollections();\n\t\t\tforeach (var tableCollection in collections)\n\t\t\t{\n\t\t\t\tif (tableCollection.name == \"Fonts\")\n\t\t\t\t{\n\t\t\t\t\tthis.AssetReference.TableReference = tableCollection.TableCollectionNameReference;\n\t\t\t\t\tforeach (var entry in tableCollection.SharedData.Entries)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (entry.Key == \"font\")\n\t\t\t\t\t\t\tthis.AssetReference.TableEntryReference = entry.Id;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n"}
